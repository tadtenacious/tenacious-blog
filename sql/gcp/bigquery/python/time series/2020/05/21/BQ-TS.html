<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Decomposing Multiplicative Time Series in GCP BigQuery (and Python too) | Tenacious Blog</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Decomposing Multiplicative Time Series in GCP BigQuery (and Python too)" />
<meta name="author" content="Tad Peterson" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A tutorial on how to decompose a multiplicative time series in both SQL and Python" />
<meta property="og:description" content="A tutorial on how to decompose a multiplicative time series in both SQL and Python" />
<meta property="og:site_name" content="Tenacious Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-21T00:00:00-05:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Tad Peterson"},"mainEntityOfPage":{"@type":"WebPage","@id":"/tenacious-blog/sql/gcp/bigquery/python/time%20series/2020/05/21/BQ-TS.html"},"description":"A tutorial on how to decompose a multiplicative time series in both SQL and Python","@type":"BlogPosting","url":"/tenacious-blog/sql/gcp/bigquery/python/time%20series/2020/05/21/BQ-TS.html","headline":"Decomposing Multiplicative Time Series in GCP BigQuery (and Python too)","dateModified":"2020-05-21T00:00:00-05:00","datePublished":"2020-05-21T00:00:00-05:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/tenacious-blog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/tenacious-blog/feed.xml" title="Tenacious Blog" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-57531313-5','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<link rel="shortcut icon" type="image/x-icon" href="/tenacious-blog/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Decomposing Multiplicative Time Series in GCP BigQuery (and Python too) | Tenacious Blog</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Decomposing Multiplicative Time Series in GCP BigQuery (and Python too)" />
<meta name="author" content="Tad Peterson" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A tutorial on how to decompose a multiplicative time series in both SQL and Python" />
<meta property="og:description" content="A tutorial on how to decompose a multiplicative time series in both SQL and Python" />
<meta property="og:site_name" content="Tenacious Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-21T00:00:00-05:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Tad Peterson"},"mainEntityOfPage":{"@type":"WebPage","@id":"/tenacious-blog/sql/gcp/bigquery/python/time%20series/2020/05/21/BQ-TS.html"},"description":"A tutorial on how to decompose a multiplicative time series in both SQL and Python","@type":"BlogPosting","url":"/tenacious-blog/sql/gcp/bigquery/python/time%20series/2020/05/21/BQ-TS.html","headline":"Decomposing Multiplicative Time Series in GCP BigQuery (and Python too)","dateModified":"2020-05-21T00:00:00-05:00","datePublished":"2020-05-21T00:00:00-05:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="/tenacious-blog/feed.xml" title="Tenacious Blog" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-57531313-5','auto');ga('require','displayfeatures');ga('send','pageview');</script>



<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/tenacious-blog/">Tenacious Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/tenacious-blog/about/">About Me</a><a class="page-link" href="/tenacious-blog/search/">Search</a><a class="page-link" href="/tenacious-blog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Decomposing Multiplicative Time Series in GCP BigQuery (and Python too)</h1><p class="page-description">A tutorial on how to decompose a multiplicative time series in both SQL and Python</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-05-21T00:00:00-05:00" itemprop="datePublished">
        May 21, 2020
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Tad Peterson</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      7 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/tenacious-blog/categories/#SQL">SQL</a>
        &nbsp;
      
        <a class="category-tags-link" href="/tenacious-blog/categories/#GCP">GCP</a>
        &nbsp;
      
        <a class="category-tags-link" href="/tenacious-blog/categories/#BigQuery">BigQuery</a>
        &nbsp;
      
        <a class="category-tags-link" href="/tenacious-blog/categories/#Python">Python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/tenacious-blog/categories/#time series">time series</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/tadtenacious/tenacious-blog/tree/master/_notebooks/2020-05-21-BQ-TS.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/tenacious-blog/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/tadtenacious/tenacious-blog/master?filepath=_notebooks%2F2020-05-21-BQ-TS.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/tenacious-blog/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/tadtenacious/tenacious-blog/blob/master/_notebooks/2020-05-21-BQ-TS.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/tenacious-blog/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#Introduction">Introduction </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Intro-to-blog-post,-what-will-be-covered">Intro to blog post, what will be covered </a></li>
<li class="toc-entry toc-h2"><a href="#Time-Series-Stuff">Time Series Stuff </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#BigQuery-(SQL)">BigQuery (SQL) </a>
<ul>
<li class="toc-entry toc-h2"><a href="#GCP-Setup">GCP Setup </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Step-1.-Create-a-project-in-GCP">Step 1. Create a project in GCP </a></li>
<li class="toc-entry toc-h3"><a href="#Step-2.-Create-a-dataset-in-BigQuery">Step 2. Create a dataset in BigQuery </a></li>
<li class="toc-entry toc-h3"><a href="#Step-3.-Upload-the-AirPassengers-csv-to-a-BigQuery-table.">Step 3. Upload the AirPassengers csv to a BigQuery table. </a></li>
<li class="toc-entry toc-h3"><a href="#Step-4.-Clean-the-data">Step 4. Clean the data </a></li>
<li class="toc-entry toc-h3"><a href="#Step-5.-Extract-the-Trend">Step 5. Extract the Trend </a></li>
<li class="toc-entry toc-h3"><a href="#Step-6.-Detrend-the-data">Step 6. Detrend the data </a></li>
<li class="toc-entry toc-h3"><a href="#Step-7.-Extract-the-Random-Noise">Step 7. Extract the Random Noise </a></li>
<li class="toc-entry toc-h3"><a href="#Step-8.-Reconstruct-the-Time-Series">Step 8. Reconstruct the Time Series </a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Python">Python </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-05-21-BQ-TS.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p></p>
<div class="flash flash-error">
    <svg class="octicon octicon-alert octicon octicon-alert octicon octicon-alert" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 000 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 00.01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg>
    <strong>Warning: </strong>UNDER CONSTRUCTION!!!
</div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Introduction">
<a class="anchor" href="#Introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction<a class="anchor-link" href="#Introduction"> </a>
</h1>
<h2 id="Intro-to-blog-post,-what-will-be-covered">
<a class="anchor" href="#Intro-to-blog-post,-what-will-be-covered" aria-hidden="true"><span class="octicon octicon-link"></span></a>Intro to blog post, what will be covered<a class="anchor-link" href="#Intro-to-blog-post,-what-will-be-covered"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Time-Series-Stuff">
<a class="anchor" href="#Time-Series-Stuff" aria-hidden="true"><span class="octicon octicon-link"></span></a>Time Series Stuff<a class="anchor-link" href="#Time-Series-Stuff"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="BigQuery-(SQL)">
<a class="anchor" href="#BigQuery-(SQL)" aria-hidden="true"><span class="octicon octicon-link"></span></a>BigQuery (SQL)<a class="anchor-link" href="#BigQuery-(SQL)"> </a>
</h1>
<h2 id="GCP-Setup">
<a class="anchor" href="#GCP-Setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>GCP Setup<a class="anchor-link" href="#GCP-Setup"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-1.-Create-a-project-in-GCP">
<a class="anchor" href="#Step-1.-Create-a-project-in-GCP" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1. Create a project in GCP<a class="anchor-link" href="#Step-1.-Create-a-project-in-GCP"> </a>
</h3>
<ul>
<li>This must be globally unique across all of GCP. My project is called bq-timeseries-proj-51620.</li>
</ul>
<h3 id="Step-2.-Create-a-dataset-in-BigQuery">
<a class="anchor" href="#Step-2.-Create-a-dataset-in-BigQuery" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2. Create a dataset in BigQuery<a class="anchor-link" href="#Step-2.-Create-a-dataset-in-BigQuery"> </a>
</h3>
<ul>
<li>From the Navigation menu in the upper left-hand corner, scroll down to BIG DATA and select BigQuery.</li>
<li>On the left in the Navigation Pane, find your project and click on it.</li>
</ul>
<p><img src="/tenacious-blog/images/copied_from_nb/images/bq-projects.png" alt="bq-proj"></p>
<ul>
<li>In the bottom pane on the right-hand side, click 
<img src="/tenacious-blog/images/copied_from_nb/images/create_ds.png" alt="create_dataset">
</li>
<li>Name your dataset, "timeseries". Leave all other defaults and select "Create dataset" at the bottom of the screen.
<img src="/tenacious-blog/images/copied_from_nb/images/name-dataset.png" alt="name-dataset"><ul>
<li>
<blockquote>
<p>Note: Note that Data location is important if you want to interact with other datasets and or projects. BigQuery requires that they be in the same location. This is outside the scope of this post, but may be important to note in future projcets.</p>
</blockquote>
</li>
</ul>
</li>
<li>You should now see the timeseries dataset below your project in the left-hand pane.</li>
</ul>
<p><img src="/tenacious-blog/images/copied_from_nb/images/show-dataset.png" alt="show-dataset"></p>
<h3 id="Step-3.-Upload-the-AirPassengers-csv-to-a-BigQuery-table.">
<a class="anchor" href="#Step-3.-Upload-the-AirPassengers-csv-to-a-BigQuery-table." aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3. Upload the AirPassengers csv to a BigQuery table.<a class="anchor-link" href="#Step-3.-Upload-the-AirPassengers-csv-to-a-BigQuery-table."> </a>
</h3>
<ul>
<li>First, click on the dataset timeseries that you created in the above step and select 
<img src="/tenacious-blog/images/copied_from_nb/images/create-table.png" alt="create-table">
</li>
<li>Select Upload from the "Create table from:" dropdown, and browse to select the AirPassengers.csv (also located <a href="https://github.com/tadtenacious/timeseries/blob/master/data/AirPassengers.csv">here</a>). Make sure your project and dataset are correct. Name the table raw_airpassengers. Check Auto detect under Schema. Leave all other defualts and click Create table 
<img src="/tenacious-blog/images/copied_from_nb/images/upload-table.png" alt="upload-table">
</li>
<li>Now we are ready to start coding.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-4.-Clean-the-data">
<a class="anchor" href="#Step-4.-Clean-the-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 4. Clean the data<a class="anchor-link" href="#Step-4.-Clean-the-data"> </a>
</h3>
<ul>
<li>Back in the left-hand pane, you should be able to click on your dataset and see the raw_airpassengers table below it. Click on the table and you will be able to see the table's Schema. 
<img src="/tenacious-blog/images/copied_from_nb/images/raw-schema.png" alt="raw-schema">
</li>
<li>If you click Preview, you can see the data and why the <code>Month</code> column has the <code>String</code> datatype. 
<img src="/tenacious-blog/images/copied_from_nb/images/raw-data.png" alt="raw-data">
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Trying to simply cast the Month column as a date will result in an error 
<img src="/tenacious-blog/images/copied_from_nb/images/invalid-date.png" alt="invalide-date">
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Because we are only concerned with the monthly data, we can concatenate <code>'-01'</code> to the end of the <code>Month</code> column and convert or cast this as a date. And because we don't want to have to do this step everytime we want to query the data, we will save our results to a table. I've also renamed the <code>Month</code> column to <code>mnth</code>. It is generally a best practice to avoid reserved words as column names. </li>
</ul>
<div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">TABLE</span>
  <span class="o">`</span><span class="n">timeseries</span><span class="p">.</span><span class="n">airpassengers</span><span class="o">`</span> <span class="k">AS</span>
<span class="k">SELECT</span>
  <span class="k">CAST</span><span class="p">(</span><span class="k">Month</span> <span class="o">||</span> <span class="s1">'-01'</span> <span class="k">AS</span> <span class="nb">DATE</span><span class="p">)</span> <span class="k">AS</span> <span class="n">mnth</span><span class="p">,</span>
  <span class="n">Passengers</span>
<span class="k">FROM</span>
  <span class="o">`</span><span class="n">timeseries</span><span class="p">.</span><span class="n">raw_airpassengers</span><span class="o">`</span>
</pre></div>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-3d24184beaa04f9688a2b1f5211c5d03"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-3d24184beaa04f9688a2b1f5211c5d03") {
      outputDiv = document.getElementById("altair-viz-3d24184beaa04f9688a2b1f5211c5d03");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-ed5047944c212044212fa68385ad6894"}, "mark": "line", "encoding": {"x": {"type": "temporal", "field": "Month"}, "y": {"type": "quantitative", "field": "Passengers"}}, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-ed5047944c212044212fa68385ad6894": [{"Month": "1949-01-01T00:00:00", "Passengers": 112, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-02-01T00:00:00", "Passengers": 118, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-03-01T00:00:00", "Passengers": 132, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-04-01T00:00:00", "Passengers": 129, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-05-01T00:00:00", "Passengers": 121, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-06-01T00:00:00", "Passengers": 135, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-07-01T00:00:00", "Passengers": 148, "trend": 126.666666667, "detrend": 1.1684210529999999, "avg_seasonality": 1.230005305, "random_noise": 0.949931718, "reconstructed": 148}, {"Month": "1949-08-01T00:00:00", "Passengers": 148, "trend": 126.916666667, "detrend": 1.1661195009999998, "avg_seasonality": 1.222716522, "random_noise": 0.953712067, "reconstructed": 148}, {"Month": "1949-09-01T00:00:00", "Passengers": 136, "trend": 127.583333333, "detrend": 1.065969954, "avg_seasonality": 1.063440298, "random_noise": 1.002378748, "reconstructed": 136}, {"Month": "1949-10-01T00:00:00", "Passengers": 119, "trend": 128.33333333299998, "detrend": 0.9272727270000001, "avg_seasonality": 0.92450994, "random_noise": 1.00298838, "reconstructed": 119}, {"Month": "1949-11-01T00:00:00", "Passengers": 104, "trend": 128.83333333299998, "detrend": 0.807244502, "avg_seasonality": 0.803798323, "random_noise": 1.004287368, "reconstructed": 104}, {"Month": "1949-12-01T00:00:00", "Passengers": 118, "trend": 129.16666666700002, "detrend": 0.9135483870000001, "avg_seasonality": 0.902477105, "random_noise": 1.01226766, "reconstructed": 118}, {"Month": "1950-01-01T00:00:00", "Passengers": 115, "trend": 130.33333333299998, "detrend": 0.882352941, "avg_seasonality": 0.914742573, "random_noise": 0.964591533, "reconstructed": 115}, {"Month": "1950-02-01T00:00:00", "Passengers": 126, "trend": 132.16666666700002, "detrend": 0.95334174, "avg_seasonality": 0.887863451, "random_noise": 1.073748153, "reconstructed": 126}, {"Month": "1950-03-01T00:00:00", "Passengers": 141, "trend": 134.0, "detrend": 1.0522388059999999, "avg_seasonality": 1.0109427579999999, "random_noise": 1.040849047, "reconstructed": 141}, {"Month": "1950-04-01T00:00:00", "Passengers": 135, "trend": 135.83333333299998, "detrend": 0.9938650309999999, "avg_seasonality": 0.9787809540000001, "random_noise": 1.015411085, "reconstructed": 135}, {"Month": "1950-05-01T00:00:00", "Passengers": 125, "trend": 137.0, "detrend": 0.9124087590000001, "avg_seasonality": 0.983574383, "random_noise": 0.9276459159999999, "reconstructed": 125}, {"Month": "1950-06-01T00:00:00", "Passengers": 149, "trend": 137.83333333299998, "detrend": 1.081015719, "avg_seasonality": 1.115711184, "random_noise": 0.968902826, "reconstructed": 149}, {"Month": "1950-07-01T00:00:00", "Passengers": 170, "trend": 139.66666666700002, "detrend": 1.217183771, "avg_seasonality": 1.230005305, "random_noise": 0.989576033, "reconstructed": 170}, {"Month": "1950-08-01T00:00:00", "Passengers": 170, "trend": 142.16666666700002, "detrend": 1.195779601, "avg_seasonality": 1.222716522, "random_noise": 0.9779696109999999, "reconstructed": 170}, {"Month": "1950-09-01T00:00:00", "Passengers": 158, "trend": 144.16666666700002, "detrend": 1.095953757, "avg_seasonality": 1.063440298, "random_noise": 1.030573845, "reconstructed": 158}, {"Month": "1950-10-01T00:00:00", "Passengers": 133, "trend": 147.25, "detrend": 0.9032258059999999, "avg_seasonality": 0.92450994, "random_noise": 0.976977929, "reconstructed": 133}, {"Month": "1950-11-01T00:00:00", "Passengers": 114, "trend": 149.58333333299998, "detrend": 0.762116992, "avg_seasonality": 0.803798323, "random_noise": 0.9481445409999999, "reconstructed": 114}, {"Month": "1950-12-01T00:00:00", "Passengers": 140, "trend": 153.5, "detrend": 0.912052117, "avg_seasonality": 0.902477105, "random_noise": 1.010609701, "reconstructed": 140}, {"Month": "1951-01-01T00:00:00", "Passengers": 145, "trend": 155.91666666700002, "detrend": 0.929983966, "avg_seasonality": 0.914742573, "random_noise": 1.0166619479999999, "reconstructed": 145}, {"Month": "1951-02-01T00:00:00", "Passengers": 150, "trend": 158.33333333299998, "detrend": 0.947368421, "avg_seasonality": 0.887863451, "random_noise": 1.067020407, "reconstructed": 150}, {"Month": "1951-03-01T00:00:00", "Passengers": 178, "trend": 160.75, "detrend": 1.107309487, "avg_seasonality": 1.0109427579999999, "random_noise": 1.095323625, "reconstructed": 178}, {"Month": "1951-04-01T00:00:00", "Passengers": 163, "trend": 162.91666666700002, "detrend": 1.000511509, "avg_seasonality": 0.9787809540000001, "random_noise": 1.022201653, "reconstructed": 163}, {"Month": "1951-05-01T00:00:00", "Passengers": 172, "trend": 165.33333333299998, "detrend": 1.0403225809999999, "avg_seasonality": 0.983574383, "random_noise": 1.057695888, "reconstructed": 172}, {"Month": "1951-06-01T00:00:00", "Passengers": 178, "trend": 168.0, "detrend": 1.05952381, "avg_seasonality": 1.115711184, "random_noise": 0.949639857, "reconstructed": 178}, {"Month": "1951-07-01T00:00:00", "Passengers": 199, "trend": 170.16666666700002, "detrend": 1.1694417240000001, "avg_seasonality": 1.230005305, "random_noise": 0.950761528, "reconstructed": 199}, {"Month": "1951-08-01T00:00:00", "Passengers": 199, "trend": 172.33333333299998, "detrend": 1.154738878, "avg_seasonality": 1.222716522, "random_noise": 0.944404412, "reconstructed": 199}, {"Month": "1951-09-01T00:00:00", "Passengers": 184, "trend": 174.83333333299998, "detrend": 1.052430887, "avg_seasonality": 1.063440298, "random_noise": 0.989647363, "reconstructed": 184}, {"Month": "1951-10-01T00:00:00", "Passengers": 162, "trend": 176.08333333299998, "detrend": 0.92001893, "avg_seasonality": 0.92450994, "random_noise": 0.9951422809999999, "reconstructed": 162}, {"Month": "1951-11-01T00:00:00", "Passengers": 146, "trend": 177.58333333299998, "detrend": 0.822149226, "avg_seasonality": 0.803798323, "random_noise": 1.0228302329999999, "reconstructed": 146}, {"Month": "1951-12-01T00:00:00", "Passengers": 166, "trend": 178.5, "detrend": 0.9299719890000001, "avg_seasonality": 0.902477105, "random_noise": 1.030466018, "reconstructed": 166}, {"Month": "1952-01-01T00:00:00", "Passengers": 171, "trend": 181.83333333299998, "detrend": 0.9404216320000001, "avg_seasonality": 0.914742573, "random_noise": 1.028072443, "reconstructed": 171}, {"Month": "1952-02-01T00:00:00", "Passengers": 180, "trend": 184.41666666700002, "detrend": 0.97605061, "avg_seasonality": 0.887863451, "random_noise": 1.0993251370000001, "reconstructed": 180}, {"Month": "1952-03-01T00:00:00", "Passengers": 193, "trend": 188.0, "detrend": 1.026595745, "avg_seasonality": 1.0109427579999999, "random_noise": 1.015483554, "reconstructed": 193}, {"Month": "1952-04-01T00:00:00", "Passengers": 181, "trend": 190.08333333299998, "detrend": 0.9522139409999999, "avg_seasonality": 0.9787809540000001, "random_noise": 0.97285704, "reconstructed": 181}, {"Month": "1952-05-01T00:00:00", "Passengers": 183, "trend": 192.5, "detrend": 0.9506493509999999, "avg_seasonality": 0.983574383, "random_noise": 0.9665251220000001, "reconstructed": 183}, {"Month": "1952-06-01T00:00:00", "Passengers": 218, "trend": 194.66666666700002, "detrend": 1.119863014, "avg_seasonality": 1.115711184, "random_noise": 1.003721241, "reconstructed": 218}, {"Month": "1952-07-01T00:00:00", "Passengers": 230, "trend": 197.0, "detrend": 1.16751269, "avg_seasonality": 1.230005305, "random_noise": 0.949193215, "reconstructed": 230}, {"Month": "1952-08-01T00:00:00", "Passengers": 242, "trend": 199.08333333299998, "detrend": 1.215571369, "avg_seasonality": 1.222716522, "random_noise": 0.9941563290000001, "reconstructed": 242}, {"Month": "1952-09-01T00:00:00", "Passengers": 209, "trend": 200.41666666700002, "detrend": 1.042827443, "avg_seasonality": 1.063440298, "random_noise": 0.98061682, "reconstructed": 209}, {"Month": "1952-10-01T00:00:00", "Passengers": 191, "trend": 204.0, "detrend": 0.93627451, "avg_seasonality": 0.92450994, "random_noise": 1.0127251959999999, "reconstructed": 191}, {"Month": "1952-11-01T00:00:00", "Passengers": 172, "trend": 208.5, "detrend": 0.824940048, "avg_seasonality": 0.803798323, "random_noise": 1.026302276, "reconstructed": 172}, {"Month": "1952-12-01T00:00:00", "Passengers": 194, "trend": 212.33333333299998, "detrend": 0.9136577709999999, "avg_seasonality": 0.902477105, "random_noise": 1.012388864, "reconstructed": 194}, {"Month": "1953-01-01T00:00:00", "Passengers": 196, "trend": 214.41666666700002, "detrend": 0.914108045, "avg_seasonality": 0.914742573, "random_noise": 0.9993063320000001, "reconstructed": 196}, {"Month": "1953-02-01T00:00:00", "Passengers": 196, "trend": 217.25, "detrend": 0.9021864209999999, "avg_seasonality": 0.887863451, "random_noise": 1.016131952, "reconstructed": 196}, {"Month": "1953-03-01T00:00:00", "Passengers": 236, "trend": 219.75, "detrend": 1.073947668, "avg_seasonality": 1.0109427579999999, "random_noise": 1.062322925, "reconstructed": 236}, {"Month": "1953-04-01T00:00:00", "Passengers": 235, "trend": 222.08333333299998, "detrend": 1.0581613509999999, "avg_seasonality": 0.9787809540000001, "random_noise": 1.081101289, "reconstructed": 235}, {"Month": "1953-05-01T00:00:00", "Passengers": 229, "trend": 223.75, "detrend": 1.023463687, "avg_seasonality": 0.983574383, "random_noise": 1.040555452, "reconstructed": 229}, {"Month": "1953-06-01T00:00:00", "Passengers": 243, "trend": 224.41666666700002, "detrend": 1.082807278, "avg_seasonality": 1.115711184, "random_noise": 0.9705085809999999, "reconstructed": 243}, {"Month": "1953-07-01T00:00:00", "Passengers": 264, "trend": 225.0, "detrend": 1.173333333, "avg_seasonality": 1.230005305, "random_noise": 0.953925425, "reconstructed": 264}, {"Month": "1953-08-01T00:00:00", "Passengers": 272, "trend": 225.66666666700002, "detrend": 1.205317578, "avg_seasonality": 1.222716522, "random_noise": 0.985770255, "reconstructed": 272}, {"Month": "1953-09-01T00:00:00", "Passengers": 237, "trend": 225.0, "detrend": 1.0533333329999999, "avg_seasonality": 1.063440298, "random_noise": 0.9904959740000001, "reconstructed": 237}, {"Month": "1953-10-01T00:00:00", "Passengers": 211, "trend": 224.91666666700002, "detrend": 0.938125232, "avg_seasonality": 0.92450994, "random_noise": 1.014727036, "reconstructed": 211}, {"Month": "1953-11-01T00:00:00", "Passengers": 180, "trend": 224.25, "detrend": 0.802675585, "avg_seasonality": 0.803798323, "random_noise": 0.99860321, "reconstructed": 180}, {"Month": "1953-12-01T00:00:00", "Passengers": 201, "trend": 224.66666666700002, "detrend": 0.8946587540000001, "avg_seasonality": 0.902477105, "random_noise": 0.991336787, "reconstructed": 201}, {"Month": "1954-01-01T00:00:00", "Passengers": 204, "trend": 226.41666666700002, "detrend": 0.900993743, "avg_seasonality": 0.914742573, "random_noise": 0.9849697279999999, "reconstructed": 204}, {"Month": "1954-02-01T00:00:00", "Passengers": 188, "trend": 229.58333333299998, "detrend": 0.818874773, "avg_seasonality": 0.887863451, "random_noise": 0.922298099, "reconstructed": 188}, {"Month": "1954-03-01T00:00:00", "Passengers": 235, "trend": 231.33333333299998, "detrend": 1.015850144, "avg_seasonality": 1.0109427579999999, "random_noise": 1.004854267, "reconstructed": 235}, {"Month": "1954-04-01T00:00:00", "Passengers": 227, "trend": 233.16666666700002, "detrend": 0.973552538, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9946582359999999, "reconstructed": 227}, {"Month": "1954-05-01T00:00:00", "Passengers": 234, "trend": 234.66666666700002, "detrend": 0.9971590909999999, "avg_seasonality": 0.983574383, "random_noise": 1.013811571, "reconstructed": 234}, {"Month": "1954-06-01T00:00:00", "Passengers": 264, "trend": 236.58333333299998, "detrend": 1.115885875, "avg_seasonality": 1.115711184, "random_noise": 1.000156574, "reconstructed": 264}, {"Month": "1954-07-01T00:00:00", "Passengers": 302, "trend": 238.91666666700002, "detrend": 1.264039065, "avg_seasonality": 1.230005305, "random_noise": 1.027669604, "reconstructed": 302}, {"Month": "1954-08-01T00:00:00", "Passengers": 293, "trend": 242.08333333299998, "detrend": 1.210327022, "avg_seasonality": 1.222716522, "random_noise": 0.989867235, "reconstructed": 293}, {"Month": "1954-09-01T00:00:00", "Passengers": 259, "trend": 245.83333333299998, "detrend": 1.0535593220000001, "avg_seasonality": 1.063440298, "random_noise": 0.990708481, "reconstructed": 259}, {"Month": "1954-10-01T00:00:00", "Passengers": 229, "trend": 248.5, "detrend": 0.921529175, "avg_seasonality": 0.92450994, "random_noise": 0.996775843, "reconstructed": 229}, {"Month": "1954-11-01T00:00:00", "Passengers": 203, "trend": 252.0, "detrend": 0.805555556, "avg_seasonality": 0.803798323, "random_noise": 1.002186161, "reconstructed": 203}, {"Month": "1954-12-01T00:00:00", "Passengers": 229, "trend": 255.0, "detrend": 0.8980392159999999, "avg_seasonality": 0.902477105, "random_noise": 0.9950825459999999, "reconstructed": 229}, {"Month": "1955-01-01T00:00:00", "Passengers": 242, "trend": 259.25, "detrend": 0.933461909, "avg_seasonality": 0.914742573, "random_noise": 1.020464048, "reconstructed": 242}, {"Month": "1955-02-01T00:00:00", "Passengers": 233, "trend": 264.416666667, "detrend": 0.8811849979999999, "avg_seasonality": 0.887863451, "random_noise": 0.992478063, "reconstructed": 233}, {"Month": "1955-03-01T00:00:00", "Passengers": 267, "trend": 268.916666667, "detrend": 0.9928726370000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9821254759999999, "reconstructed": 267}, {"Month": "1955-04-01T00:00:00", "Passengers": 269, "trend": 273.333333333, "detrend": 0.984146341, "avg_seasonality": 0.9787809540000001, "random_noise": 1.0054817040000001, "reconstructed": 269}, {"Month": "1955-05-01T00:00:00", "Passengers": 270, "trend": 277.083333333, "detrend": 0.97443609, "avg_seasonality": 0.983574383, "random_noise": 0.990709098, "reconstructed": 270}, {"Month": "1955-06-01T00:00:00", "Passengers": 315, "trend": 279.916666667, "detrend": 1.1253349209999999, "avg_seasonality": 1.115711184, "random_noise": 1.008625653, "reconstructed": 315}, {"Month": "1955-07-01T00:00:00", "Passengers": 364, "trend": 284.0, "detrend": 1.281690141, "avg_seasonality": 1.230005305, "random_noise": 1.042020011, "reconstructed": 364}, {"Month": "1955-08-01T00:00:00", "Passengers": 347, "trend": 287.5, "detrend": 1.206956522, "avg_seasonality": 1.222716522, "random_noise": 0.987110667, "reconstructed": 347}, {"Month": "1955-09-01T00:00:00", "Passengers": 312, "trend": 291.166666667, "detrend": 1.071551231, "avg_seasonality": 1.063440298, "random_noise": 1.007627069, "reconstructed": 312}, {"Month": "1955-10-01T00:00:00", "Passengers": 274, "trend": 295.333333333, "detrend": 0.927765237, "avg_seasonality": 0.92450994, "random_noise": 1.003521105, "reconstructed": 274}, {"Month": "1955-11-01T00:00:00", "Passengers": 237, "trend": 299.0, "detrend": 0.79264214, "avg_seasonality": 0.803798323, "random_noise": 0.98612067, "reconstructed": 237}, {"Month": "1955-12-01T00:00:00", "Passengers": 278, "trend": 303.0, "detrend": 0.9174917490000001, "avg_seasonality": 0.902477105, "random_noise": 1.016637147, "reconstructed": 278}, {"Month": "1956-01-01T00:00:00", "Passengers": 284, "trend": 307.916666667, "detrend": 0.92232747, "avg_seasonality": 0.914742573, "random_noise": 1.008291837, "reconstructed": 284}, {"Month": "1956-02-01T00:00:00", "Passengers": 277, "trend": 312.0, "detrend": 0.887820513, "avg_seasonality": 0.887863451, "random_noise": 0.9999516390000001, "reconstructed": 277}, {"Month": "1956-03-01T00:00:00", "Passengers": 317, "trend": 316.833333333, "detrend": 1.0005260390000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.989696035, "reconstructed": 317}, {"Month": "1956-04-01T00:00:00", "Passengers": 313, "trend": 320.416666667, "detrend": 0.9768530559999999, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9980303070000001, "reconstructed": 313}, {"Month": "1956-05-01T00:00:00", "Passengers": 318, "trend": 323.083333333, "detrend": 0.984266185, "avg_seasonality": 0.983574383, "random_noise": 1.000703355, "reconstructed": 318}, {"Month": "1956-06-01T00:00:00", "Passengers": 374, "trend": 325.916666667, "detrend": 1.1475326000000001, "avg_seasonality": 1.115711184, "random_noise": 1.028521195, "reconstructed": 374}, {"Month": "1956-07-01T00:00:00", "Passengers": 413, "trend": 328.25, "detrend": 1.258187357, "avg_seasonality": 1.230005305, "random_noise": 1.022912139, "reconstructed": 413}, {"Month": "1956-08-01T00:00:00", "Passengers": 405, "trend": 330.833333333, "detrend": 1.22418136, "avg_seasonality": 1.222716522, "random_noise": 1.001198019, "reconstructed": 405}, {"Month": "1956-09-01T00:00:00", "Passengers": 355, "trend": 332.833333333, "detrend": 1.0665999, "avg_seasonality": 1.063440298, "random_noise": 1.0029711140000002, "reconstructed": 355}, {"Month": "1956-10-01T00:00:00", "Passengers": 306, "trend": 336.083333333, "detrend": 0.91048847, "avg_seasonality": 0.92450994, "random_noise": 0.9848336190000001, "reconstructed": 306}, {"Month": "1956-11-01T00:00:00", "Passengers": 271, "trend": 339.0, "detrend": 0.799410029, "avg_seasonality": 0.803798323, "random_noise": 0.9945405540000001, "reconstructed": 271}, {"Month": "1956-12-01T00:00:00", "Passengers": 306, "trend": 342.083333333, "detrend": 0.894518879, "avg_seasonality": 0.902477105, "random_noise": 0.991181798, "reconstructed": 306}, {"Month": "1957-01-01T00:00:00", "Passengers": 315, "trend": 346.08333333300004, "detrend": 0.9101854079999999, "avg_seasonality": 0.914742573, "random_noise": 0.99501809, "reconstructed": 315}, {"Month": "1957-02-01T00:00:00", "Passengers": 301, "trend": 350.41666666699996, "detrend": 0.858977408, "avg_seasonality": 0.887863451, "random_noise": 0.9674656690000001, "reconstructed": 301}, {"Month": "1957-03-01T00:00:00", "Passengers": 356, "trend": 355.58333333300004, "detrend": 1.001171783, "avg_seasonality": 1.0109427579999999, "random_noise": 0.99033479, "reconstructed": 356}, {"Month": "1957-04-01T00:00:00", "Passengers": 348, "trend": 359.66666666699996, "detrend": 0.967562558, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9885384, "reconstructed": 348}, {"Month": "1957-05-01T00:00:00", "Passengers": 355, "trend": 363.08333333300004, "detrend": 0.977736975, "avg_seasonality": 0.983574383, "random_noise": 0.9940651079999999, "reconstructed": 355}, {"Month": "1957-06-01T00:00:00", "Passengers": 422, "trend": 365.91666666699996, "detrend": 1.153268048, "avg_seasonality": 1.115711184, "random_noise": 1.033661816, "reconstructed": 422}, {"Month": "1957-07-01T00:00:00", "Passengers": 465, "trend": 368.41666666699996, "detrend": 1.262157883, "avg_seasonality": 1.230005305, "random_noise": 1.0261401940000001, "reconstructed": 465}, {"Month": "1957-08-01T00:00:00", "Passengers": 467, "trend": 370.5, "detrend": 1.260458839, "avg_seasonality": 1.222716522, "random_noise": 1.030867594, "reconstructed": 467}, {"Month": "1957-09-01T00:00:00", "Passengers": 404, "trend": 371.91666666699996, "detrend": 1.086264844, "avg_seasonality": 1.063440298, "random_noise": 1.021462932, "reconstructed": 404}, {"Month": "1957-10-01T00:00:00", "Passengers": 347, "trend": 372.41666666699996, "detrend": 0.93175207, "avg_seasonality": 0.92450994, "random_noise": 1.00783348, "reconstructed": 347}, {"Month": "1957-11-01T00:00:00", "Passengers": 305, "trend": 372.41666666699996, "detrend": 0.818975162, "avg_seasonality": 0.803798323, "random_noise": 1.018881402, "reconstructed": 305}, {"Month": "1957-12-01T00:00:00", "Passengers": 336, "trend": 373.08333333300004, "detrend": 0.900603082, "avg_seasonality": 0.902477105, "random_noise": 0.997923468, "reconstructed": 336}, {"Month": "1958-01-01T00:00:00", "Passengers": 340, "trend": 374.16666666699996, "detrend": 0.9086859690000001, "avg_seasonality": 0.914742573, "random_noise": 0.993378898, "reconstructed": 340}, {"Month": "1958-02-01T00:00:00", "Passengers": 318, "trend": 376.33333333300004, "detrend": 0.8449955709999999, "avg_seasonality": 0.887863451, "random_noise": 0.951717936, "reconstructed": 318}, {"Month": "1958-03-01T00:00:00", "Passengers": 362, "trend": 379.5, "detrend": 0.953886693, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9435615279999999, "reconstructed": 362}, {"Month": "1958-04-01T00:00:00", "Passengers": 348, "trend": 379.5, "detrend": 0.916996047, "avg_seasonality": 0.9787809540000001, "random_noise": 0.936875655, "reconstructed": 348}, {"Month": "1958-05-01T00:00:00", "Passengers": 363, "trend": 380.5, "detrend": 0.954007884, "avg_seasonality": 0.983574383, "random_noise": 0.969939743, "reconstructed": 363}, {"Month": "1958-06-01T00:00:00", "Passengers": 435, "trend": 380.91666666699996, "detrend": 1.141982061, "avg_seasonality": 1.115711184, "random_noise": 1.0235463059999999, "reconstructed": 435}, {"Month": "1958-07-01T00:00:00", "Passengers": 491, "trend": 381.0, "detrend": 1.2887139109999999, "avg_seasonality": 1.230005305, "random_noise": 1.047730368, "reconstructed": 491}, {"Month": "1958-08-01T00:00:00", "Passengers": 505, "trend": 382.66666666699996, "detrend": 1.319686411, "avg_seasonality": 1.222716522, "random_noise": 1.0793069259999999, "reconstructed": 505}, {"Month": "1958-09-01T00:00:00", "Passengers": 404, "trend": 384.66666666699996, "detrend": 1.050259965, "avg_seasonality": 1.063440298, "random_noise": 0.98760595, "reconstructed": 404}, {"Month": "1958-10-01T00:00:00", "Passengers": 359, "trend": 388.33333333300004, "detrend": 0.924463519, "avg_seasonality": 0.92450994, "random_noise": 0.9999497890000001, "reconstructed": 359}, {"Month": "1958-11-01T00:00:00", "Passengers": 310, "trend": 392.33333333300004, "detrend": 0.790144435, "avg_seasonality": 0.803798323, "random_noise": 0.9830132909999999, "reconstructed": 310}, {"Month": "1958-12-01T00:00:00", "Passengers": 337, "trend": 397.08333333300004, "detrend": 0.848688353, "avg_seasonality": 0.902477105, "random_noise": 0.940398762, "reconstructed": 337}, {"Month": "1959-01-01T00:00:00", "Passengers": 360, "trend": 400.16666666699996, "detrend": 0.8996251559999999, "avg_seasonality": 0.914742573, "random_noise": 0.983473583, "reconstructed": 360}, {"Month": "1959-02-01T00:00:00", "Passengers": 342, "trend": 404.91666666699996, "detrend": 0.844618234, "avg_seasonality": 0.887863451, "random_noise": 0.951292942, "reconstructed": 342}, {"Month": "1959-03-01T00:00:00", "Passengers": 406, "trend": 409.41666666699996, "detrend": 0.9916547929999999, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9809208140000001, "reconstructed": 406}, {"Month": "1959-04-01T00:00:00", "Passengers": 396, "trend": 414.33333333300004, "detrend": 0.955752212, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9764720170000001, "reconstructed": 396}, {"Month": "1959-05-01T00:00:00", "Passengers": 420, "trend": 418.33333333300004, "detrend": 1.003984064, "avg_seasonality": 0.983574383, "random_noise": 1.0207505209999999, "reconstructed": 420}, {"Month": "1959-06-01T00:00:00", "Passengers": 472, "trend": 422.66666666699996, "detrend": 1.116719243, "avg_seasonality": 1.115711184, "random_noise": 1.000903512, "reconstructed": 472}, {"Month": "1959-07-01T00:00:00", "Passengers": 548, "trend": 428.33333333300004, "detrend": 1.279377432, "avg_seasonality": 1.230005305, "random_noise": 1.040139767, "reconstructed": 548}, {"Month": "1959-08-01T00:00:00", "Passengers": 559, "trend": 433.08333333300004, "detrend": 1.29074466, "avg_seasonality": 1.222716522, "random_noise": 1.055636885, "reconstructed": 559}, {"Month": "1959-09-01T00:00:00", "Passengers": 463, "trend": 437.16666666699996, "detrend": 1.059092642, "avg_seasonality": 1.063440298, "random_noise": 0.995911707, "reconstructed": 463}, {"Month": "1959-10-01T00:00:00", "Passengers": 407, "trend": 438.25, "detrend": 0.928693668, "avg_seasonality": 0.92450994, "random_noise": 1.004525347, "reconstructed": 407}, {"Month": "1959-11-01T00:00:00", "Passengers": 362, "trend": 443.66666666699996, "detrend": 0.8159278740000001, "avg_seasonality": 0.803798323, "random_noise": 1.015090291, "reconstructed": 362}, {"Month": "1959-12-01T00:00:00", "Passengers": 405, "trend": 448.0, "detrend": 0.904017857, "avg_seasonality": 0.902477105, "random_noise": 1.001707248, "reconstructed": 405}, {"Month": "1960-01-01T00:00:00", "Passengers": 417, "trend": 453.25, "detrend": 0.920022063, "avg_seasonality": 0.914742573, "random_noise": 1.005771558, "reconstructed": 417}, {"Month": "1960-02-01T00:00:00", "Passengers": 391, "trend": 459.41666666699996, "detrend": 0.851079267, "avg_seasonality": 0.887863451, "random_noise": 0.9585699990000001, "reconstructed": 391}, {"Month": "1960-03-01T00:00:00", "Passengers": 419, "trend": 463.33333333300004, "detrend": 0.9043165470000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.894527944, "reconstructed": 419}, {"Month": "1960-04-01T00:00:00", "Passengers": 461, "trend": 467.08333333300004, "detrend": 0.9869759140000001, "avg_seasonality": 0.9787809540000001, "random_noise": 1.008372619, "reconstructed": 461}, {"Month": "1960-05-01T00:00:00", "Passengers": 472, "trend": 471.58333333300004, "detrend": 1.000883548, "avg_seasonality": 0.983574383, "random_noise": 1.0175982270000001, "reconstructed": 472}, {"Month": "1960-06-01T00:00:00", "Passengers": 535, "trend": 473.91666666699996, "detrend": 1.128890452, "avg_seasonality": 1.115711184, "random_noise": 1.0118124370000001, "reconstructed": 535}, {"Month": "1960-07-01T00:00:00", "Passengers": 622, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-08-01T00:00:00", "Passengers": 606, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-09-01T00:00:00", "Passengers": 508, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-10-01T00:00:00", "Passengers": 461, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-11-01T00:00:00", "Passengers": 390, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-12-01T00:00:00", "Passengers": 432, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}]}}, {"mode": "vega-lite"});
</script>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-5.-Extract-the-Trend">
<a class="anchor" href="#Step-5.-Extract-the-Trend" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 5. Extract the Trend<a class="anchor-link" href="#Step-5.-Extract-the-Trend"> </a>
</h3>
<ul>
<li>The trend in this context is a centered moving average. We can use the <code>OVER()</code> clause with the <code>AVG()</code> function in BigQuery to accomplish this. We believe the periodicity to be yearly/12 months. So we must center the average around this window. We will opt to use 6 months before and 5 months after the actual month. This includes the actual month making the period a full year. You can read more about the <code>OVER()</code> clause in <a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/analytic-function-concepts">BigQuery here</a>.</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">SELECT</span>
    <span class="n">mnth</span><span class="p">,</span>
    <span class="n">passengers</span><span class="p">,</span>
    <span class="k">AVG</span><span class="p">(</span><span class="k">CAST</span><span class="p">(</span><span class="n">Passengers</span> <span class="k">AS</span> <span class="nb">NUMERIC</span><span class="p">))</span> 
      <span class="n">OVER</span><span class="p">(</span>
        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">mnth</span> 
        <span class="k">ROWS</span> <span class="k">BETWEEN</span> <span class="mi">6</span> <span class="n">PRECEDING</span> <span class="k">AND</span> <span class="mi">5</span> <span class="n">FOLLOWING</span>
      <span class="p">)</span> <span class="k">AS</span> <span class="n">trend</span>
<span class="k">FROM</span>
  <span class="o">`</span><span class="n">timeseries</span><span class="p">.</span><span class="n">airpassengers</span><span class="o">`</span>
</pre></div>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mnth</th>
      <th>passengers</th>
      <th>trend</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1949-01-01</td>
      <td>112</td>
      <td>124.500000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1949-02-01</td>
      <td>118</td>
      <td>127.857143</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1949-03-01</td>
      <td>132</td>
      <td>130.375000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1949-04-01</td>
      <td>129</td>
      <td>131.000000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1949-05-01</td>
      <td>121</td>
      <td>129.800000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1949-06-01</td>
      <td>135</td>
      <td>127.454545</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1949-07-01</td>
      <td>148</td>
      <td>126.666667</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1949-08-01</td>
      <td>148</td>
      <td>126.916667</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1949-09-01</td>
      <td>136</td>
      <td>127.583333</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1949-10-01</td>
      <td>119</td>
      <td>128.333333</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>But you will notice that all months are returned in the result set even if they do not have data 6 months before or after the actual month. These values are not truly centered and must be ommitted. I'll choose to solve this using <a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax#with_clause">common table expressions</a> to make multiple passes at the data.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span><span class="k">WITH</span> <span class="n">initial</span> <span class="k">AS</span> <span class="p">(</span>
  <span class="k">SELECT</span>
    <span class="n">mnth</span><span class="p">,</span>
    <span class="n">passengers</span><span class="p">,</span>
    <span class="k">AVG</span><span class="p">(</span><span class="k">CAST</span><span class="p">(</span><span class="n">Passengers</span> <span class="k">AS</span> <span class="nb">NUMERIC</span><span class="p">))</span> 
      <span class="n">OVER</span><span class="p">(</span>
        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">mnth</span> 
        <span class="k">ROWS</span> <span class="k">BETWEEN</span> <span class="mi">6</span> <span class="n">PRECEDING</span> <span class="k">AND</span> <span class="mi">5</span> <span class="n">FOLLOWING</span>
      <span class="p">)</span> <span class="k">AS</span> <span class="n">trend</span>
  <span class="k">FROM</span>
    <span class="o">`</span><span class="n">timeseries</span><span class="p">.</span><span class="n">airpassengers</span><span class="o">`</span><span class="p">)</span>
<span class="k">SELECT</span>
  <span class="n">a</span><span class="p">.</span><span class="n">mnth</span>
  <span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">passengers</span>
  <span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">trend</span>
<span class="k">FROM</span> <span class="n">initial</span> <span class="n">a</span>
<span class="k">WHERE</span> <span class="k">EXISTS</span> <span class="p">(</span>
            <span class="k">SELECT</span> <span class="mi">1</span> <span class="k">FROM</span> <span class="n">initial</span> <span class="n">x</span>
            <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">mnth</span> <span class="o">=</span> <span class="n">DATE_SUB</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">mnth</span><span class="p">,</span> <span class="nb">INTERVAL</span> <span class="mi">5</span> <span class="k">MONTH</span><span class="p">)</span>
            <span class="p">)</span>
<span class="k">AND</span> <span class="k">EXISTS</span> <span class="p">(</span>
          <span class="k">SELECT</span> <span class="mi">1</span> <span class="k">FROM</span> <span class="n">initial</span> <span class="n">x</span>
            <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">mnth</span> <span class="o">=</span> <span class="n">DATE_ADD</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">mnth</span><span class="p">,</span> <span class="nb">INTERVAL</span> <span class="mi">6</span> <span class="k">MONTH</span><span class="p">)</span>
            <span class="p">)</span>
</pre></div>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mnth</th>
      <th>passengers</th>
      <th>trend</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6</th>
      <td>1949-07-01</td>
      <td>148</td>
      <td>126.666667</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1949-08-01</td>
      <td>148</td>
      <td>126.916667</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1949-09-01</td>
      <td>136</td>
      <td>127.583333</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1949-10-01</td>
      <td>119</td>
      <td>128.333333</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1949-11-01</td>
      <td>104</td>
      <td>128.833333</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-ccd84f28b9274bd68e3927f9db737e05"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-ccd84f28b9274bd68e3927f9db737e05") {
      outputDiv = document.getElementById("altair-viz-ccd84f28b9274bd68e3927f9db737e05");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-ed5047944c212044212fa68385ad6894"}, "mark": "line", "encoding": {"color": {"type": "nominal", "field": "key"}, "x": {"type": "temporal", "field": "Month"}, "y": {"type": "quantitative", "field": "value"}}, "title": "Trend", "transform": [{"fold": ["Passengers", "trend"]}], "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-ed5047944c212044212fa68385ad6894": [{"Month": "1949-01-01T00:00:00", "Passengers": 112, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-02-01T00:00:00", "Passengers": 118, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-03-01T00:00:00", "Passengers": 132, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-04-01T00:00:00", "Passengers": 129, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-05-01T00:00:00", "Passengers": 121, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-06-01T00:00:00", "Passengers": 135, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-07-01T00:00:00", "Passengers": 148, "trend": 126.666666667, "detrend": 1.1684210529999999, "avg_seasonality": 1.230005305, "random_noise": 0.949931718, "reconstructed": 148}, {"Month": "1949-08-01T00:00:00", "Passengers": 148, "trend": 126.916666667, "detrend": 1.1661195009999998, "avg_seasonality": 1.222716522, "random_noise": 0.953712067, "reconstructed": 148}, {"Month": "1949-09-01T00:00:00", "Passengers": 136, "trend": 127.583333333, "detrend": 1.065969954, "avg_seasonality": 1.063440298, "random_noise": 1.002378748, "reconstructed": 136}, {"Month": "1949-10-01T00:00:00", "Passengers": 119, "trend": 128.33333333299998, "detrend": 0.9272727270000001, "avg_seasonality": 0.92450994, "random_noise": 1.00298838, "reconstructed": 119}, {"Month": "1949-11-01T00:00:00", "Passengers": 104, "trend": 128.83333333299998, "detrend": 0.807244502, "avg_seasonality": 0.803798323, "random_noise": 1.004287368, "reconstructed": 104}, {"Month": "1949-12-01T00:00:00", "Passengers": 118, "trend": 129.16666666700002, "detrend": 0.9135483870000001, "avg_seasonality": 0.902477105, "random_noise": 1.01226766, "reconstructed": 118}, {"Month": "1950-01-01T00:00:00", "Passengers": 115, "trend": 130.33333333299998, "detrend": 0.882352941, "avg_seasonality": 0.914742573, "random_noise": 0.964591533, "reconstructed": 115}, {"Month": "1950-02-01T00:00:00", "Passengers": 126, "trend": 132.16666666700002, "detrend": 0.95334174, "avg_seasonality": 0.887863451, "random_noise": 1.073748153, "reconstructed": 126}, {"Month": "1950-03-01T00:00:00", "Passengers": 141, "trend": 134.0, "detrend": 1.0522388059999999, "avg_seasonality": 1.0109427579999999, "random_noise": 1.040849047, "reconstructed": 141}, {"Month": "1950-04-01T00:00:00", "Passengers": 135, "trend": 135.83333333299998, "detrend": 0.9938650309999999, "avg_seasonality": 0.9787809540000001, "random_noise": 1.015411085, "reconstructed": 135}, {"Month": "1950-05-01T00:00:00", "Passengers": 125, "trend": 137.0, "detrend": 0.9124087590000001, "avg_seasonality": 0.983574383, "random_noise": 0.9276459159999999, "reconstructed": 125}, {"Month": "1950-06-01T00:00:00", "Passengers": 149, "trend": 137.83333333299998, "detrend": 1.081015719, "avg_seasonality": 1.115711184, "random_noise": 0.968902826, "reconstructed": 149}, {"Month": "1950-07-01T00:00:00", "Passengers": 170, "trend": 139.66666666700002, "detrend": 1.217183771, "avg_seasonality": 1.230005305, "random_noise": 0.989576033, "reconstructed": 170}, {"Month": "1950-08-01T00:00:00", "Passengers": 170, "trend": 142.16666666700002, "detrend": 1.195779601, "avg_seasonality": 1.222716522, "random_noise": 0.9779696109999999, "reconstructed": 170}, {"Month": "1950-09-01T00:00:00", "Passengers": 158, "trend": 144.16666666700002, "detrend": 1.095953757, "avg_seasonality": 1.063440298, "random_noise": 1.030573845, "reconstructed": 158}, {"Month": "1950-10-01T00:00:00", "Passengers": 133, "trend": 147.25, "detrend": 0.9032258059999999, "avg_seasonality": 0.92450994, "random_noise": 0.976977929, "reconstructed": 133}, {"Month": "1950-11-01T00:00:00", "Passengers": 114, "trend": 149.58333333299998, "detrend": 0.762116992, "avg_seasonality": 0.803798323, "random_noise": 0.9481445409999999, "reconstructed": 114}, {"Month": "1950-12-01T00:00:00", "Passengers": 140, "trend": 153.5, "detrend": 0.912052117, "avg_seasonality": 0.902477105, "random_noise": 1.010609701, "reconstructed": 140}, {"Month": "1951-01-01T00:00:00", "Passengers": 145, "trend": 155.91666666700002, "detrend": 0.929983966, "avg_seasonality": 0.914742573, "random_noise": 1.0166619479999999, "reconstructed": 145}, {"Month": "1951-02-01T00:00:00", "Passengers": 150, "trend": 158.33333333299998, "detrend": 0.947368421, "avg_seasonality": 0.887863451, "random_noise": 1.067020407, "reconstructed": 150}, {"Month": "1951-03-01T00:00:00", "Passengers": 178, "trend": 160.75, "detrend": 1.107309487, "avg_seasonality": 1.0109427579999999, "random_noise": 1.095323625, "reconstructed": 178}, {"Month": "1951-04-01T00:00:00", "Passengers": 163, "trend": 162.91666666700002, "detrend": 1.000511509, "avg_seasonality": 0.9787809540000001, "random_noise": 1.022201653, "reconstructed": 163}, {"Month": "1951-05-01T00:00:00", "Passengers": 172, "trend": 165.33333333299998, "detrend": 1.0403225809999999, "avg_seasonality": 0.983574383, "random_noise": 1.057695888, "reconstructed": 172}, {"Month": "1951-06-01T00:00:00", "Passengers": 178, "trend": 168.0, "detrend": 1.05952381, "avg_seasonality": 1.115711184, "random_noise": 0.949639857, "reconstructed": 178}, {"Month": "1951-07-01T00:00:00", "Passengers": 199, "trend": 170.16666666700002, "detrend": 1.1694417240000001, "avg_seasonality": 1.230005305, "random_noise": 0.950761528, "reconstructed": 199}, {"Month": "1951-08-01T00:00:00", "Passengers": 199, "trend": 172.33333333299998, "detrend": 1.154738878, "avg_seasonality": 1.222716522, "random_noise": 0.944404412, "reconstructed": 199}, {"Month": "1951-09-01T00:00:00", "Passengers": 184, "trend": 174.83333333299998, "detrend": 1.052430887, "avg_seasonality": 1.063440298, "random_noise": 0.989647363, "reconstructed": 184}, {"Month": "1951-10-01T00:00:00", "Passengers": 162, "trend": 176.08333333299998, "detrend": 0.92001893, "avg_seasonality": 0.92450994, "random_noise": 0.9951422809999999, "reconstructed": 162}, {"Month": "1951-11-01T00:00:00", "Passengers": 146, "trend": 177.58333333299998, "detrend": 0.822149226, "avg_seasonality": 0.803798323, "random_noise": 1.0228302329999999, "reconstructed": 146}, {"Month": "1951-12-01T00:00:00", "Passengers": 166, "trend": 178.5, "detrend": 0.9299719890000001, "avg_seasonality": 0.902477105, "random_noise": 1.030466018, "reconstructed": 166}, {"Month": "1952-01-01T00:00:00", "Passengers": 171, "trend": 181.83333333299998, "detrend": 0.9404216320000001, "avg_seasonality": 0.914742573, "random_noise": 1.028072443, "reconstructed": 171}, {"Month": "1952-02-01T00:00:00", "Passengers": 180, "trend": 184.41666666700002, "detrend": 0.97605061, "avg_seasonality": 0.887863451, "random_noise": 1.0993251370000001, "reconstructed": 180}, {"Month": "1952-03-01T00:00:00", "Passengers": 193, "trend": 188.0, "detrend": 1.026595745, "avg_seasonality": 1.0109427579999999, "random_noise": 1.015483554, "reconstructed": 193}, {"Month": "1952-04-01T00:00:00", "Passengers": 181, "trend": 190.08333333299998, "detrend": 0.9522139409999999, "avg_seasonality": 0.9787809540000001, "random_noise": 0.97285704, "reconstructed": 181}, {"Month": "1952-05-01T00:00:00", "Passengers": 183, "trend": 192.5, "detrend": 0.9506493509999999, "avg_seasonality": 0.983574383, "random_noise": 0.9665251220000001, "reconstructed": 183}, {"Month": "1952-06-01T00:00:00", "Passengers": 218, "trend": 194.66666666700002, "detrend": 1.119863014, "avg_seasonality": 1.115711184, "random_noise": 1.003721241, "reconstructed": 218}, {"Month": "1952-07-01T00:00:00", "Passengers": 230, "trend": 197.0, "detrend": 1.16751269, "avg_seasonality": 1.230005305, "random_noise": 0.949193215, "reconstructed": 230}, {"Month": "1952-08-01T00:00:00", "Passengers": 242, "trend": 199.08333333299998, "detrend": 1.215571369, "avg_seasonality": 1.222716522, "random_noise": 0.9941563290000001, "reconstructed": 242}, {"Month": "1952-09-01T00:00:00", "Passengers": 209, "trend": 200.41666666700002, "detrend": 1.042827443, "avg_seasonality": 1.063440298, "random_noise": 0.98061682, "reconstructed": 209}, {"Month": "1952-10-01T00:00:00", "Passengers": 191, "trend": 204.0, "detrend": 0.93627451, "avg_seasonality": 0.92450994, "random_noise": 1.0127251959999999, "reconstructed": 191}, {"Month": "1952-11-01T00:00:00", "Passengers": 172, "trend": 208.5, "detrend": 0.824940048, "avg_seasonality": 0.803798323, "random_noise": 1.026302276, "reconstructed": 172}, {"Month": "1952-12-01T00:00:00", "Passengers": 194, "trend": 212.33333333299998, "detrend": 0.9136577709999999, "avg_seasonality": 0.902477105, "random_noise": 1.012388864, "reconstructed": 194}, {"Month": "1953-01-01T00:00:00", "Passengers": 196, "trend": 214.41666666700002, "detrend": 0.914108045, "avg_seasonality": 0.914742573, "random_noise": 0.9993063320000001, "reconstructed": 196}, {"Month": "1953-02-01T00:00:00", "Passengers": 196, "trend": 217.25, "detrend": 0.9021864209999999, "avg_seasonality": 0.887863451, "random_noise": 1.016131952, "reconstructed": 196}, {"Month": "1953-03-01T00:00:00", "Passengers": 236, "trend": 219.75, "detrend": 1.073947668, "avg_seasonality": 1.0109427579999999, "random_noise": 1.062322925, "reconstructed": 236}, {"Month": "1953-04-01T00:00:00", "Passengers": 235, "trend": 222.08333333299998, "detrend": 1.0581613509999999, "avg_seasonality": 0.9787809540000001, "random_noise": 1.081101289, "reconstructed": 235}, {"Month": "1953-05-01T00:00:00", "Passengers": 229, "trend": 223.75, "detrend": 1.023463687, "avg_seasonality": 0.983574383, "random_noise": 1.040555452, "reconstructed": 229}, {"Month": "1953-06-01T00:00:00", "Passengers": 243, "trend": 224.41666666700002, "detrend": 1.082807278, "avg_seasonality": 1.115711184, "random_noise": 0.9705085809999999, "reconstructed": 243}, {"Month": "1953-07-01T00:00:00", "Passengers": 264, "trend": 225.0, "detrend": 1.173333333, "avg_seasonality": 1.230005305, "random_noise": 0.953925425, "reconstructed": 264}, {"Month": "1953-08-01T00:00:00", "Passengers": 272, "trend": 225.66666666700002, "detrend": 1.205317578, "avg_seasonality": 1.222716522, "random_noise": 0.985770255, "reconstructed": 272}, {"Month": "1953-09-01T00:00:00", "Passengers": 237, "trend": 225.0, "detrend": 1.0533333329999999, "avg_seasonality": 1.063440298, "random_noise": 0.9904959740000001, "reconstructed": 237}, {"Month": "1953-10-01T00:00:00", "Passengers": 211, "trend": 224.91666666700002, "detrend": 0.938125232, "avg_seasonality": 0.92450994, "random_noise": 1.014727036, "reconstructed": 211}, {"Month": "1953-11-01T00:00:00", "Passengers": 180, "trend": 224.25, "detrend": 0.802675585, "avg_seasonality": 0.803798323, "random_noise": 0.99860321, "reconstructed": 180}, {"Month": "1953-12-01T00:00:00", "Passengers": 201, "trend": 224.66666666700002, "detrend": 0.8946587540000001, "avg_seasonality": 0.902477105, "random_noise": 0.991336787, "reconstructed": 201}, {"Month": "1954-01-01T00:00:00", "Passengers": 204, "trend": 226.41666666700002, "detrend": 0.900993743, "avg_seasonality": 0.914742573, "random_noise": 0.9849697279999999, "reconstructed": 204}, {"Month": "1954-02-01T00:00:00", "Passengers": 188, "trend": 229.58333333299998, "detrend": 0.818874773, "avg_seasonality": 0.887863451, "random_noise": 0.922298099, "reconstructed": 188}, {"Month": "1954-03-01T00:00:00", "Passengers": 235, "trend": 231.33333333299998, "detrend": 1.015850144, "avg_seasonality": 1.0109427579999999, "random_noise": 1.004854267, "reconstructed": 235}, {"Month": "1954-04-01T00:00:00", "Passengers": 227, "trend": 233.16666666700002, "detrend": 0.973552538, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9946582359999999, "reconstructed": 227}, {"Month": "1954-05-01T00:00:00", "Passengers": 234, "trend": 234.66666666700002, "detrend": 0.9971590909999999, "avg_seasonality": 0.983574383, "random_noise": 1.013811571, "reconstructed": 234}, {"Month": "1954-06-01T00:00:00", "Passengers": 264, "trend": 236.58333333299998, "detrend": 1.115885875, "avg_seasonality": 1.115711184, "random_noise": 1.000156574, "reconstructed": 264}, {"Month": "1954-07-01T00:00:00", "Passengers": 302, "trend": 238.91666666700002, "detrend": 1.264039065, "avg_seasonality": 1.230005305, "random_noise": 1.027669604, "reconstructed": 302}, {"Month": "1954-08-01T00:00:00", "Passengers": 293, "trend": 242.08333333299998, "detrend": 1.210327022, "avg_seasonality": 1.222716522, "random_noise": 0.989867235, "reconstructed": 293}, {"Month": "1954-09-01T00:00:00", "Passengers": 259, "trend": 245.83333333299998, "detrend": 1.0535593220000001, "avg_seasonality": 1.063440298, "random_noise": 0.990708481, "reconstructed": 259}, {"Month": "1954-10-01T00:00:00", "Passengers": 229, "trend": 248.5, "detrend": 0.921529175, "avg_seasonality": 0.92450994, "random_noise": 0.996775843, "reconstructed": 229}, {"Month": "1954-11-01T00:00:00", "Passengers": 203, "trend": 252.0, "detrend": 0.805555556, "avg_seasonality": 0.803798323, "random_noise": 1.002186161, "reconstructed": 203}, {"Month": "1954-12-01T00:00:00", "Passengers": 229, "trend": 255.0, "detrend": 0.8980392159999999, "avg_seasonality": 0.902477105, "random_noise": 0.9950825459999999, "reconstructed": 229}, {"Month": "1955-01-01T00:00:00", "Passengers": 242, "trend": 259.25, "detrend": 0.933461909, "avg_seasonality": 0.914742573, "random_noise": 1.020464048, "reconstructed": 242}, {"Month": "1955-02-01T00:00:00", "Passengers": 233, "trend": 264.416666667, "detrend": 0.8811849979999999, "avg_seasonality": 0.887863451, "random_noise": 0.992478063, "reconstructed": 233}, {"Month": "1955-03-01T00:00:00", "Passengers": 267, "trend": 268.916666667, "detrend": 0.9928726370000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9821254759999999, "reconstructed": 267}, {"Month": "1955-04-01T00:00:00", "Passengers": 269, "trend": 273.333333333, "detrend": 0.984146341, "avg_seasonality": 0.9787809540000001, "random_noise": 1.0054817040000001, "reconstructed": 269}, {"Month": "1955-05-01T00:00:00", "Passengers": 270, "trend": 277.083333333, "detrend": 0.97443609, "avg_seasonality": 0.983574383, "random_noise": 0.990709098, "reconstructed": 270}, {"Month": "1955-06-01T00:00:00", "Passengers": 315, "trend": 279.916666667, "detrend": 1.1253349209999999, "avg_seasonality": 1.115711184, "random_noise": 1.008625653, "reconstructed": 315}, {"Month": "1955-07-01T00:00:00", "Passengers": 364, "trend": 284.0, "detrend": 1.281690141, "avg_seasonality": 1.230005305, "random_noise": 1.042020011, "reconstructed": 364}, {"Month": "1955-08-01T00:00:00", "Passengers": 347, "trend": 287.5, "detrend": 1.206956522, "avg_seasonality": 1.222716522, "random_noise": 0.987110667, "reconstructed": 347}, {"Month": "1955-09-01T00:00:00", "Passengers": 312, "trend": 291.166666667, "detrend": 1.071551231, "avg_seasonality": 1.063440298, "random_noise": 1.007627069, "reconstructed": 312}, {"Month": "1955-10-01T00:00:00", "Passengers": 274, "trend": 295.333333333, "detrend": 0.927765237, "avg_seasonality": 0.92450994, "random_noise": 1.003521105, "reconstructed": 274}, {"Month": "1955-11-01T00:00:00", "Passengers": 237, "trend": 299.0, "detrend": 0.79264214, "avg_seasonality": 0.803798323, "random_noise": 0.98612067, "reconstructed": 237}, {"Month": "1955-12-01T00:00:00", "Passengers": 278, "trend": 303.0, "detrend": 0.9174917490000001, "avg_seasonality": 0.902477105, "random_noise": 1.016637147, "reconstructed": 278}, {"Month": "1956-01-01T00:00:00", "Passengers": 284, "trend": 307.916666667, "detrend": 0.92232747, "avg_seasonality": 0.914742573, "random_noise": 1.008291837, "reconstructed": 284}, {"Month": "1956-02-01T00:00:00", "Passengers": 277, "trend": 312.0, "detrend": 0.887820513, "avg_seasonality": 0.887863451, "random_noise": 0.9999516390000001, "reconstructed": 277}, {"Month": "1956-03-01T00:00:00", "Passengers": 317, "trend": 316.833333333, "detrend": 1.0005260390000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.989696035, "reconstructed": 317}, {"Month": "1956-04-01T00:00:00", "Passengers": 313, "trend": 320.416666667, "detrend": 0.9768530559999999, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9980303070000001, "reconstructed": 313}, {"Month": "1956-05-01T00:00:00", "Passengers": 318, "trend": 323.083333333, "detrend": 0.984266185, "avg_seasonality": 0.983574383, "random_noise": 1.000703355, "reconstructed": 318}, {"Month": "1956-06-01T00:00:00", "Passengers": 374, "trend": 325.916666667, "detrend": 1.1475326000000001, "avg_seasonality": 1.115711184, "random_noise": 1.028521195, "reconstructed": 374}, {"Month": "1956-07-01T00:00:00", "Passengers": 413, "trend": 328.25, "detrend": 1.258187357, "avg_seasonality": 1.230005305, "random_noise": 1.022912139, "reconstructed": 413}, {"Month": "1956-08-01T00:00:00", "Passengers": 405, "trend": 330.833333333, "detrend": 1.22418136, "avg_seasonality": 1.222716522, "random_noise": 1.001198019, "reconstructed": 405}, {"Month": "1956-09-01T00:00:00", "Passengers": 355, "trend": 332.833333333, "detrend": 1.0665999, "avg_seasonality": 1.063440298, "random_noise": 1.0029711140000002, "reconstructed": 355}, {"Month": "1956-10-01T00:00:00", "Passengers": 306, "trend": 336.083333333, "detrend": 0.91048847, "avg_seasonality": 0.92450994, "random_noise": 0.9848336190000001, "reconstructed": 306}, {"Month": "1956-11-01T00:00:00", "Passengers": 271, "trend": 339.0, "detrend": 0.799410029, "avg_seasonality": 0.803798323, "random_noise": 0.9945405540000001, "reconstructed": 271}, {"Month": "1956-12-01T00:00:00", "Passengers": 306, "trend": 342.083333333, "detrend": 0.894518879, "avg_seasonality": 0.902477105, "random_noise": 0.991181798, "reconstructed": 306}, {"Month": "1957-01-01T00:00:00", "Passengers": 315, "trend": 346.08333333300004, "detrend": 0.9101854079999999, "avg_seasonality": 0.914742573, "random_noise": 0.99501809, "reconstructed": 315}, {"Month": "1957-02-01T00:00:00", "Passengers": 301, "trend": 350.41666666699996, "detrend": 0.858977408, "avg_seasonality": 0.887863451, "random_noise": 0.9674656690000001, "reconstructed": 301}, {"Month": "1957-03-01T00:00:00", "Passengers": 356, "trend": 355.58333333300004, "detrend": 1.001171783, "avg_seasonality": 1.0109427579999999, "random_noise": 0.99033479, "reconstructed": 356}, {"Month": "1957-04-01T00:00:00", "Passengers": 348, "trend": 359.66666666699996, "detrend": 0.967562558, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9885384, "reconstructed": 348}, {"Month": "1957-05-01T00:00:00", "Passengers": 355, "trend": 363.08333333300004, "detrend": 0.977736975, "avg_seasonality": 0.983574383, "random_noise": 0.9940651079999999, "reconstructed": 355}, {"Month": "1957-06-01T00:00:00", "Passengers": 422, "trend": 365.91666666699996, "detrend": 1.153268048, "avg_seasonality": 1.115711184, "random_noise": 1.033661816, "reconstructed": 422}, {"Month": "1957-07-01T00:00:00", "Passengers": 465, "trend": 368.41666666699996, "detrend": 1.262157883, "avg_seasonality": 1.230005305, "random_noise": 1.0261401940000001, "reconstructed": 465}, {"Month": "1957-08-01T00:00:00", "Passengers": 467, "trend": 370.5, "detrend": 1.260458839, "avg_seasonality": 1.222716522, "random_noise": 1.030867594, "reconstructed": 467}, {"Month": "1957-09-01T00:00:00", "Passengers": 404, "trend": 371.91666666699996, "detrend": 1.086264844, "avg_seasonality": 1.063440298, "random_noise": 1.021462932, "reconstructed": 404}, {"Month": "1957-10-01T00:00:00", "Passengers": 347, "trend": 372.41666666699996, "detrend": 0.93175207, "avg_seasonality": 0.92450994, "random_noise": 1.00783348, "reconstructed": 347}, {"Month": "1957-11-01T00:00:00", "Passengers": 305, "trend": 372.41666666699996, "detrend": 0.818975162, "avg_seasonality": 0.803798323, "random_noise": 1.018881402, "reconstructed": 305}, {"Month": "1957-12-01T00:00:00", "Passengers": 336, "trend": 373.08333333300004, "detrend": 0.900603082, "avg_seasonality": 0.902477105, "random_noise": 0.997923468, "reconstructed": 336}, {"Month": "1958-01-01T00:00:00", "Passengers": 340, "trend": 374.16666666699996, "detrend": 0.9086859690000001, "avg_seasonality": 0.914742573, "random_noise": 0.993378898, "reconstructed": 340}, {"Month": "1958-02-01T00:00:00", "Passengers": 318, "trend": 376.33333333300004, "detrend": 0.8449955709999999, "avg_seasonality": 0.887863451, "random_noise": 0.951717936, "reconstructed": 318}, {"Month": "1958-03-01T00:00:00", "Passengers": 362, "trend": 379.5, "detrend": 0.953886693, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9435615279999999, "reconstructed": 362}, {"Month": "1958-04-01T00:00:00", "Passengers": 348, "trend": 379.5, "detrend": 0.916996047, "avg_seasonality": 0.9787809540000001, "random_noise": 0.936875655, "reconstructed": 348}, {"Month": "1958-05-01T00:00:00", "Passengers": 363, "trend": 380.5, "detrend": 0.954007884, "avg_seasonality": 0.983574383, "random_noise": 0.969939743, "reconstructed": 363}, {"Month": "1958-06-01T00:00:00", "Passengers": 435, "trend": 380.91666666699996, "detrend": 1.141982061, "avg_seasonality": 1.115711184, "random_noise": 1.0235463059999999, "reconstructed": 435}, {"Month": "1958-07-01T00:00:00", "Passengers": 491, "trend": 381.0, "detrend": 1.2887139109999999, "avg_seasonality": 1.230005305, "random_noise": 1.047730368, "reconstructed": 491}, {"Month": "1958-08-01T00:00:00", "Passengers": 505, "trend": 382.66666666699996, "detrend": 1.319686411, "avg_seasonality": 1.222716522, "random_noise": 1.0793069259999999, "reconstructed": 505}, {"Month": "1958-09-01T00:00:00", "Passengers": 404, "trend": 384.66666666699996, "detrend": 1.050259965, "avg_seasonality": 1.063440298, "random_noise": 0.98760595, "reconstructed": 404}, {"Month": "1958-10-01T00:00:00", "Passengers": 359, "trend": 388.33333333300004, "detrend": 0.924463519, "avg_seasonality": 0.92450994, "random_noise": 0.9999497890000001, "reconstructed": 359}, {"Month": "1958-11-01T00:00:00", "Passengers": 310, "trend": 392.33333333300004, "detrend": 0.790144435, "avg_seasonality": 0.803798323, "random_noise": 0.9830132909999999, "reconstructed": 310}, {"Month": "1958-12-01T00:00:00", "Passengers": 337, "trend": 397.08333333300004, "detrend": 0.848688353, "avg_seasonality": 0.902477105, "random_noise": 0.940398762, "reconstructed": 337}, {"Month": "1959-01-01T00:00:00", "Passengers": 360, "trend": 400.16666666699996, "detrend": 0.8996251559999999, "avg_seasonality": 0.914742573, "random_noise": 0.983473583, "reconstructed": 360}, {"Month": "1959-02-01T00:00:00", "Passengers": 342, "trend": 404.91666666699996, "detrend": 0.844618234, "avg_seasonality": 0.887863451, "random_noise": 0.951292942, "reconstructed": 342}, {"Month": "1959-03-01T00:00:00", "Passengers": 406, "trend": 409.41666666699996, "detrend": 0.9916547929999999, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9809208140000001, "reconstructed": 406}, {"Month": "1959-04-01T00:00:00", "Passengers": 396, "trend": 414.33333333300004, "detrend": 0.955752212, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9764720170000001, "reconstructed": 396}, {"Month": "1959-05-01T00:00:00", "Passengers": 420, "trend": 418.33333333300004, "detrend": 1.003984064, "avg_seasonality": 0.983574383, "random_noise": 1.0207505209999999, "reconstructed": 420}, {"Month": "1959-06-01T00:00:00", "Passengers": 472, "trend": 422.66666666699996, "detrend": 1.116719243, "avg_seasonality": 1.115711184, "random_noise": 1.000903512, "reconstructed": 472}, {"Month": "1959-07-01T00:00:00", "Passengers": 548, "trend": 428.33333333300004, "detrend": 1.279377432, "avg_seasonality": 1.230005305, "random_noise": 1.040139767, "reconstructed": 548}, {"Month": "1959-08-01T00:00:00", "Passengers": 559, "trend": 433.08333333300004, "detrend": 1.29074466, "avg_seasonality": 1.222716522, "random_noise": 1.055636885, "reconstructed": 559}, {"Month": "1959-09-01T00:00:00", "Passengers": 463, "trend": 437.16666666699996, "detrend": 1.059092642, "avg_seasonality": 1.063440298, "random_noise": 0.995911707, "reconstructed": 463}, {"Month": "1959-10-01T00:00:00", "Passengers": 407, "trend": 438.25, "detrend": 0.928693668, "avg_seasonality": 0.92450994, "random_noise": 1.004525347, "reconstructed": 407}, {"Month": "1959-11-01T00:00:00", "Passengers": 362, "trend": 443.66666666699996, "detrend": 0.8159278740000001, "avg_seasonality": 0.803798323, "random_noise": 1.015090291, "reconstructed": 362}, {"Month": "1959-12-01T00:00:00", "Passengers": 405, "trend": 448.0, "detrend": 0.904017857, "avg_seasonality": 0.902477105, "random_noise": 1.001707248, "reconstructed": 405}, {"Month": "1960-01-01T00:00:00", "Passengers": 417, "trend": 453.25, "detrend": 0.920022063, "avg_seasonality": 0.914742573, "random_noise": 1.005771558, "reconstructed": 417}, {"Month": "1960-02-01T00:00:00", "Passengers": 391, "trend": 459.41666666699996, "detrend": 0.851079267, "avg_seasonality": 0.887863451, "random_noise": 0.9585699990000001, "reconstructed": 391}, {"Month": "1960-03-01T00:00:00", "Passengers": 419, "trend": 463.33333333300004, "detrend": 0.9043165470000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.894527944, "reconstructed": 419}, {"Month": "1960-04-01T00:00:00", "Passengers": 461, "trend": 467.08333333300004, "detrend": 0.9869759140000001, "avg_seasonality": 0.9787809540000001, "random_noise": 1.008372619, "reconstructed": 461}, {"Month": "1960-05-01T00:00:00", "Passengers": 472, "trend": 471.58333333300004, "detrend": 1.000883548, "avg_seasonality": 0.983574383, "random_noise": 1.0175982270000001, "reconstructed": 472}, {"Month": "1960-06-01T00:00:00", "Passengers": 535, "trend": 473.91666666699996, "detrend": 1.128890452, "avg_seasonality": 1.115711184, "random_noise": 1.0118124370000001, "reconstructed": 535}, {"Month": "1960-07-01T00:00:00", "Passengers": 622, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-08-01T00:00:00", "Passengers": 606, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-09-01T00:00:00", "Passengers": 508, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-10-01T00:00:00", "Passengers": 461, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-11-01T00:00:00", "Passengers": 390, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-12-01T00:00:00", "Passengers": 432, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}]}}, {"mode": "vega-lite"});
</script>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-6.-Detrend-the-data">
<a class="anchor" href="#Step-6.-Detrend-the-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 6. Detrend the data<a class="anchor-link" href="#Step-6.-Detrend-the-data"> </a>
</h3>
<ul>
<li>Removing the trend from the data will leave use with the seasonality. We believe our time series to be multiplicative, so we will divide the passengers column by the trend.</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">WITH</span> <span class="n">initial</span> <span class="k">AS</span> <span class="p">(</span>
  <span class="k">SELECT</span>
    <span class="n">mnth</span><span class="p">,</span>
    <span class="n">passengers</span><span class="p">,</span>
    <span class="k">AVG</span><span class="p">(</span><span class="k">CAST</span><span class="p">(</span><span class="n">Passengers</span> <span class="k">AS</span> <span class="nb">NUMERIC</span><span class="p">))</span> 
      <span class="n">OVER</span><span class="p">(</span>
        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">mnth</span> 
        <span class="k">ROWS</span> <span class="k">BETWEEN</span> <span class="mi">6</span> <span class="n">PRECEDING</span> <span class="k">AND</span> <span class="mi">5</span> <span class="n">FOLLOWING</span>
      <span class="p">)</span> <span class="k">AS</span> <span class="n">trend</span>
<span class="k">FROM</span>
  <span class="o">`</span><span class="n">timeseries</span><span class="p">.</span><span class="n">airpassengers</span><span class="o">`</span><span class="p">),</span>
<span class="n">trend</span> <span class="k">AS</span> <span class="p">(</span>
  <span class="k">SELECT</span>
    <span class="n">a</span><span class="p">.</span><span class="n">mnth</span>
    <span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">passengers</span>
    <span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">trend</span>
  <span class="k">FROM</span> <span class="n">initial</span> <span class="n">a</span>
  <span class="k">WHERE</span> <span class="k">EXISTS</span> <span class="p">(</span>
                <span class="k">SELECT</span> <span class="mi">1</span> <span class="k">FROM</span> <span class="n">initial</span> <span class="n">x</span>
                <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">mnth</span> <span class="o">=</span> <span class="n">DATE_SUB</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">mnth</span><span class="p">,</span> <span class="nb">INTERVAL</span> <span class="mi">5</span> <span class="k">MONTH</span><span class="p">)</span>
                <span class="p">)</span>
  <span class="k">AND</span> <span class="k">EXISTS</span> <span class="p">(</span>
              <span class="k">SELECT</span> <span class="mi">1</span> <span class="k">FROM</span> <span class="n">initial</span> <span class="n">x</span>
                <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">mnth</span> <span class="o">=</span> <span class="n">DATE_ADD</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">mnth</span><span class="p">,</span> <span class="nb">INTERVAL</span> <span class="mi">6</span> <span class="k">MONTH</span><span class="p">)</span>
                <span class="p">)</span>
<span class="p">)</span>             
<span class="k">SELECT</span>
  <span class="n">t</span><span class="p">.</span><span class="n">mnth</span>
  <span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">passengers</span>
  <span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">trend</span>
  <span class="p">,</span><span class="k">CAST</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">passengers</span> <span class="k">AS</span> <span class="nb">NUMERIC</span><span class="p">)</span> <span class="o">/</span> <span class="n">t</span><span class="p">.</span><span class="n">trend</span> <span class="k">AS</span> <span class="n">detrend</span>
<span class="k">FROM</span> <span class="n">trend</span> <span class="n">t</span>
</pre></div>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mnth</th>
      <th>passengers</th>
      <th>trend</th>
      <th>detrend</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6</th>
      <td>1949-07-01</td>
      <td>148</td>
      <td>126.666667</td>
      <td>1.168421</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1949-08-01</td>
      <td>148</td>
      <td>126.916667</td>
      <td>1.166120</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1949-09-01</td>
      <td>136</td>
      <td>127.583333</td>
      <td>1.065970</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1949-10-01</td>
      <td>119</td>
      <td>128.333333</td>
      <td>0.927273</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1949-11-01</td>
      <td>104</td>
      <td>128.833333</td>
      <td>0.807245</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-2633ecebb63e4730b4fe3e1904a30fa5"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-2633ecebb63e4730b4fe3e1904a30fa5") {
      outputDiv = document.getElementById("altair-viz-2633ecebb63e4730b4fe3e1904a30fa5");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-ed5047944c212044212fa68385ad6894"}, "mark": "line", "encoding": {"x": {"type": "temporal", "field": "Month"}, "y": {"type": "quantitative", "field": "detrend"}}, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-ed5047944c212044212fa68385ad6894": [{"Month": "1949-01-01T00:00:00", "Passengers": 112, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-02-01T00:00:00", "Passengers": 118, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-03-01T00:00:00", "Passengers": 132, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-04-01T00:00:00", "Passengers": 129, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-05-01T00:00:00", "Passengers": 121, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-06-01T00:00:00", "Passengers": 135, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-07-01T00:00:00", "Passengers": 148, "trend": 126.666666667, "detrend": 1.1684210529999999, "avg_seasonality": 1.230005305, "random_noise": 0.949931718, "reconstructed": 148}, {"Month": "1949-08-01T00:00:00", "Passengers": 148, "trend": 126.916666667, "detrend": 1.1661195009999998, "avg_seasonality": 1.222716522, "random_noise": 0.953712067, "reconstructed": 148}, {"Month": "1949-09-01T00:00:00", "Passengers": 136, "trend": 127.583333333, "detrend": 1.065969954, "avg_seasonality": 1.063440298, "random_noise": 1.002378748, "reconstructed": 136}, {"Month": "1949-10-01T00:00:00", "Passengers": 119, "trend": 128.33333333299998, "detrend": 0.9272727270000001, "avg_seasonality": 0.92450994, "random_noise": 1.00298838, "reconstructed": 119}, {"Month": "1949-11-01T00:00:00", "Passengers": 104, "trend": 128.83333333299998, "detrend": 0.807244502, "avg_seasonality": 0.803798323, "random_noise": 1.004287368, "reconstructed": 104}, {"Month": "1949-12-01T00:00:00", "Passengers": 118, "trend": 129.16666666700002, "detrend": 0.9135483870000001, "avg_seasonality": 0.902477105, "random_noise": 1.01226766, "reconstructed": 118}, {"Month": "1950-01-01T00:00:00", "Passengers": 115, "trend": 130.33333333299998, "detrend": 0.882352941, "avg_seasonality": 0.914742573, "random_noise": 0.964591533, "reconstructed": 115}, {"Month": "1950-02-01T00:00:00", "Passengers": 126, "trend": 132.16666666700002, "detrend": 0.95334174, "avg_seasonality": 0.887863451, "random_noise": 1.073748153, "reconstructed": 126}, {"Month": "1950-03-01T00:00:00", "Passengers": 141, "trend": 134.0, "detrend": 1.0522388059999999, "avg_seasonality": 1.0109427579999999, "random_noise": 1.040849047, "reconstructed": 141}, {"Month": "1950-04-01T00:00:00", "Passengers": 135, "trend": 135.83333333299998, "detrend": 0.9938650309999999, "avg_seasonality": 0.9787809540000001, "random_noise": 1.015411085, "reconstructed": 135}, {"Month": "1950-05-01T00:00:00", "Passengers": 125, "trend": 137.0, "detrend": 0.9124087590000001, "avg_seasonality": 0.983574383, "random_noise": 0.9276459159999999, "reconstructed": 125}, {"Month": "1950-06-01T00:00:00", "Passengers": 149, "trend": 137.83333333299998, "detrend": 1.081015719, "avg_seasonality": 1.115711184, "random_noise": 0.968902826, "reconstructed": 149}, {"Month": "1950-07-01T00:00:00", "Passengers": 170, "trend": 139.66666666700002, "detrend": 1.217183771, "avg_seasonality": 1.230005305, "random_noise": 0.989576033, "reconstructed": 170}, {"Month": "1950-08-01T00:00:00", "Passengers": 170, "trend": 142.16666666700002, "detrend": 1.195779601, "avg_seasonality": 1.222716522, "random_noise": 0.9779696109999999, "reconstructed": 170}, {"Month": "1950-09-01T00:00:00", "Passengers": 158, "trend": 144.16666666700002, "detrend": 1.095953757, "avg_seasonality": 1.063440298, "random_noise": 1.030573845, "reconstructed": 158}, {"Month": "1950-10-01T00:00:00", "Passengers": 133, "trend": 147.25, "detrend": 0.9032258059999999, "avg_seasonality": 0.92450994, "random_noise": 0.976977929, "reconstructed": 133}, {"Month": "1950-11-01T00:00:00", "Passengers": 114, "trend": 149.58333333299998, "detrend": 0.762116992, "avg_seasonality": 0.803798323, "random_noise": 0.9481445409999999, "reconstructed": 114}, {"Month": "1950-12-01T00:00:00", "Passengers": 140, "trend": 153.5, "detrend": 0.912052117, "avg_seasonality": 0.902477105, "random_noise": 1.010609701, "reconstructed": 140}, {"Month": "1951-01-01T00:00:00", "Passengers": 145, "trend": 155.91666666700002, "detrend": 0.929983966, "avg_seasonality": 0.914742573, "random_noise": 1.0166619479999999, "reconstructed": 145}, {"Month": "1951-02-01T00:00:00", "Passengers": 150, "trend": 158.33333333299998, "detrend": 0.947368421, "avg_seasonality": 0.887863451, "random_noise": 1.067020407, "reconstructed": 150}, {"Month": "1951-03-01T00:00:00", "Passengers": 178, "trend": 160.75, "detrend": 1.107309487, "avg_seasonality": 1.0109427579999999, "random_noise": 1.095323625, "reconstructed": 178}, {"Month": "1951-04-01T00:00:00", "Passengers": 163, "trend": 162.91666666700002, "detrend": 1.000511509, "avg_seasonality": 0.9787809540000001, "random_noise": 1.022201653, "reconstructed": 163}, {"Month": "1951-05-01T00:00:00", "Passengers": 172, "trend": 165.33333333299998, "detrend": 1.0403225809999999, "avg_seasonality": 0.983574383, "random_noise": 1.057695888, "reconstructed": 172}, {"Month": "1951-06-01T00:00:00", "Passengers": 178, "trend": 168.0, "detrend": 1.05952381, "avg_seasonality": 1.115711184, "random_noise": 0.949639857, "reconstructed": 178}, {"Month": "1951-07-01T00:00:00", "Passengers": 199, "trend": 170.16666666700002, "detrend": 1.1694417240000001, "avg_seasonality": 1.230005305, "random_noise": 0.950761528, "reconstructed": 199}, {"Month": "1951-08-01T00:00:00", "Passengers": 199, "trend": 172.33333333299998, "detrend": 1.154738878, "avg_seasonality": 1.222716522, "random_noise": 0.944404412, "reconstructed": 199}, {"Month": "1951-09-01T00:00:00", "Passengers": 184, "trend": 174.83333333299998, "detrend": 1.052430887, "avg_seasonality": 1.063440298, "random_noise": 0.989647363, "reconstructed": 184}, {"Month": "1951-10-01T00:00:00", "Passengers": 162, "trend": 176.08333333299998, "detrend": 0.92001893, "avg_seasonality": 0.92450994, "random_noise": 0.9951422809999999, "reconstructed": 162}, {"Month": "1951-11-01T00:00:00", "Passengers": 146, "trend": 177.58333333299998, "detrend": 0.822149226, "avg_seasonality": 0.803798323, "random_noise": 1.0228302329999999, "reconstructed": 146}, {"Month": "1951-12-01T00:00:00", "Passengers": 166, "trend": 178.5, "detrend": 0.9299719890000001, "avg_seasonality": 0.902477105, "random_noise": 1.030466018, "reconstructed": 166}, {"Month": "1952-01-01T00:00:00", "Passengers": 171, "trend": 181.83333333299998, "detrend": 0.9404216320000001, "avg_seasonality": 0.914742573, "random_noise": 1.028072443, "reconstructed": 171}, {"Month": "1952-02-01T00:00:00", "Passengers": 180, "trend": 184.41666666700002, "detrend": 0.97605061, "avg_seasonality": 0.887863451, "random_noise": 1.0993251370000001, "reconstructed": 180}, {"Month": "1952-03-01T00:00:00", "Passengers": 193, "trend": 188.0, "detrend": 1.026595745, "avg_seasonality": 1.0109427579999999, "random_noise": 1.015483554, "reconstructed": 193}, {"Month": "1952-04-01T00:00:00", "Passengers": 181, "trend": 190.08333333299998, "detrend": 0.9522139409999999, "avg_seasonality": 0.9787809540000001, "random_noise": 0.97285704, "reconstructed": 181}, {"Month": "1952-05-01T00:00:00", "Passengers": 183, "trend": 192.5, "detrend": 0.9506493509999999, "avg_seasonality": 0.983574383, "random_noise": 0.9665251220000001, "reconstructed": 183}, {"Month": "1952-06-01T00:00:00", "Passengers": 218, "trend": 194.66666666700002, "detrend": 1.119863014, "avg_seasonality": 1.115711184, "random_noise": 1.003721241, "reconstructed": 218}, {"Month": "1952-07-01T00:00:00", "Passengers": 230, "trend": 197.0, "detrend": 1.16751269, "avg_seasonality": 1.230005305, "random_noise": 0.949193215, "reconstructed": 230}, {"Month": "1952-08-01T00:00:00", "Passengers": 242, "trend": 199.08333333299998, "detrend": 1.215571369, "avg_seasonality": 1.222716522, "random_noise": 0.9941563290000001, "reconstructed": 242}, {"Month": "1952-09-01T00:00:00", "Passengers": 209, "trend": 200.41666666700002, "detrend": 1.042827443, "avg_seasonality": 1.063440298, "random_noise": 0.98061682, "reconstructed": 209}, {"Month": "1952-10-01T00:00:00", "Passengers": 191, "trend": 204.0, "detrend": 0.93627451, "avg_seasonality": 0.92450994, "random_noise": 1.0127251959999999, "reconstructed": 191}, {"Month": "1952-11-01T00:00:00", "Passengers": 172, "trend": 208.5, "detrend": 0.824940048, "avg_seasonality": 0.803798323, "random_noise": 1.026302276, "reconstructed": 172}, {"Month": "1952-12-01T00:00:00", "Passengers": 194, "trend": 212.33333333299998, "detrend": 0.9136577709999999, "avg_seasonality": 0.902477105, "random_noise": 1.012388864, "reconstructed": 194}, {"Month": "1953-01-01T00:00:00", "Passengers": 196, "trend": 214.41666666700002, "detrend": 0.914108045, "avg_seasonality": 0.914742573, "random_noise": 0.9993063320000001, "reconstructed": 196}, {"Month": "1953-02-01T00:00:00", "Passengers": 196, "trend": 217.25, "detrend": 0.9021864209999999, "avg_seasonality": 0.887863451, "random_noise": 1.016131952, "reconstructed": 196}, {"Month": "1953-03-01T00:00:00", "Passengers": 236, "trend": 219.75, "detrend": 1.073947668, "avg_seasonality": 1.0109427579999999, "random_noise": 1.062322925, "reconstructed": 236}, {"Month": "1953-04-01T00:00:00", "Passengers": 235, "trend": 222.08333333299998, "detrend": 1.0581613509999999, "avg_seasonality": 0.9787809540000001, "random_noise": 1.081101289, "reconstructed": 235}, {"Month": "1953-05-01T00:00:00", "Passengers": 229, "trend": 223.75, "detrend": 1.023463687, "avg_seasonality": 0.983574383, "random_noise": 1.040555452, "reconstructed": 229}, {"Month": "1953-06-01T00:00:00", "Passengers": 243, "trend": 224.41666666700002, "detrend": 1.082807278, "avg_seasonality": 1.115711184, "random_noise": 0.9705085809999999, "reconstructed": 243}, {"Month": "1953-07-01T00:00:00", "Passengers": 264, "trend": 225.0, "detrend": 1.173333333, "avg_seasonality": 1.230005305, "random_noise": 0.953925425, "reconstructed": 264}, {"Month": "1953-08-01T00:00:00", "Passengers": 272, "trend": 225.66666666700002, "detrend": 1.205317578, "avg_seasonality": 1.222716522, "random_noise": 0.985770255, "reconstructed": 272}, {"Month": "1953-09-01T00:00:00", "Passengers": 237, "trend": 225.0, "detrend": 1.0533333329999999, "avg_seasonality": 1.063440298, "random_noise": 0.9904959740000001, "reconstructed": 237}, {"Month": "1953-10-01T00:00:00", "Passengers": 211, "trend": 224.91666666700002, "detrend": 0.938125232, "avg_seasonality": 0.92450994, "random_noise": 1.014727036, "reconstructed": 211}, {"Month": "1953-11-01T00:00:00", "Passengers": 180, "trend": 224.25, "detrend": 0.802675585, "avg_seasonality": 0.803798323, "random_noise": 0.99860321, "reconstructed": 180}, {"Month": "1953-12-01T00:00:00", "Passengers": 201, "trend": 224.66666666700002, "detrend": 0.8946587540000001, "avg_seasonality": 0.902477105, "random_noise": 0.991336787, "reconstructed": 201}, {"Month": "1954-01-01T00:00:00", "Passengers": 204, "trend": 226.41666666700002, "detrend": 0.900993743, "avg_seasonality": 0.914742573, "random_noise": 0.9849697279999999, "reconstructed": 204}, {"Month": "1954-02-01T00:00:00", "Passengers": 188, "trend": 229.58333333299998, "detrend": 0.818874773, "avg_seasonality": 0.887863451, "random_noise": 0.922298099, "reconstructed": 188}, {"Month": "1954-03-01T00:00:00", "Passengers": 235, "trend": 231.33333333299998, "detrend": 1.015850144, "avg_seasonality": 1.0109427579999999, "random_noise": 1.004854267, "reconstructed": 235}, {"Month": "1954-04-01T00:00:00", "Passengers": 227, "trend": 233.16666666700002, "detrend": 0.973552538, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9946582359999999, "reconstructed": 227}, {"Month": "1954-05-01T00:00:00", "Passengers": 234, "trend": 234.66666666700002, "detrend": 0.9971590909999999, "avg_seasonality": 0.983574383, "random_noise": 1.013811571, "reconstructed": 234}, {"Month": "1954-06-01T00:00:00", "Passengers": 264, "trend": 236.58333333299998, "detrend": 1.115885875, "avg_seasonality": 1.115711184, "random_noise": 1.000156574, "reconstructed": 264}, {"Month": "1954-07-01T00:00:00", "Passengers": 302, "trend": 238.91666666700002, "detrend": 1.264039065, "avg_seasonality": 1.230005305, "random_noise": 1.027669604, "reconstructed": 302}, {"Month": "1954-08-01T00:00:00", "Passengers": 293, "trend": 242.08333333299998, "detrend": 1.210327022, "avg_seasonality": 1.222716522, "random_noise": 0.989867235, "reconstructed": 293}, {"Month": "1954-09-01T00:00:00", "Passengers": 259, "trend": 245.83333333299998, "detrend": 1.0535593220000001, "avg_seasonality": 1.063440298, "random_noise": 0.990708481, "reconstructed": 259}, {"Month": "1954-10-01T00:00:00", "Passengers": 229, "trend": 248.5, "detrend": 0.921529175, "avg_seasonality": 0.92450994, "random_noise": 0.996775843, "reconstructed": 229}, {"Month": "1954-11-01T00:00:00", "Passengers": 203, "trend": 252.0, "detrend": 0.805555556, "avg_seasonality": 0.803798323, "random_noise": 1.002186161, "reconstructed": 203}, {"Month": "1954-12-01T00:00:00", "Passengers": 229, "trend": 255.0, "detrend": 0.8980392159999999, "avg_seasonality": 0.902477105, "random_noise": 0.9950825459999999, "reconstructed": 229}, {"Month": "1955-01-01T00:00:00", "Passengers": 242, "trend": 259.25, "detrend": 0.933461909, "avg_seasonality": 0.914742573, "random_noise": 1.020464048, "reconstructed": 242}, {"Month": "1955-02-01T00:00:00", "Passengers": 233, "trend": 264.416666667, "detrend": 0.8811849979999999, "avg_seasonality": 0.887863451, "random_noise": 0.992478063, "reconstructed": 233}, {"Month": "1955-03-01T00:00:00", "Passengers": 267, "trend": 268.916666667, "detrend": 0.9928726370000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9821254759999999, "reconstructed": 267}, {"Month": "1955-04-01T00:00:00", "Passengers": 269, "trend": 273.333333333, "detrend": 0.984146341, "avg_seasonality": 0.9787809540000001, "random_noise": 1.0054817040000001, "reconstructed": 269}, {"Month": "1955-05-01T00:00:00", "Passengers": 270, "trend": 277.083333333, "detrend": 0.97443609, "avg_seasonality": 0.983574383, "random_noise": 0.990709098, "reconstructed": 270}, {"Month": "1955-06-01T00:00:00", "Passengers": 315, "trend": 279.916666667, "detrend": 1.1253349209999999, "avg_seasonality": 1.115711184, "random_noise": 1.008625653, "reconstructed": 315}, {"Month": "1955-07-01T00:00:00", "Passengers": 364, "trend": 284.0, "detrend": 1.281690141, "avg_seasonality": 1.230005305, "random_noise": 1.042020011, "reconstructed": 364}, {"Month": "1955-08-01T00:00:00", "Passengers": 347, "trend": 287.5, "detrend": 1.206956522, "avg_seasonality": 1.222716522, "random_noise": 0.987110667, "reconstructed": 347}, {"Month": "1955-09-01T00:00:00", "Passengers": 312, "trend": 291.166666667, "detrend": 1.071551231, "avg_seasonality": 1.063440298, "random_noise": 1.007627069, "reconstructed": 312}, {"Month": "1955-10-01T00:00:00", "Passengers": 274, "trend": 295.333333333, "detrend": 0.927765237, "avg_seasonality": 0.92450994, "random_noise": 1.003521105, "reconstructed": 274}, {"Month": "1955-11-01T00:00:00", "Passengers": 237, "trend": 299.0, "detrend": 0.79264214, "avg_seasonality": 0.803798323, "random_noise": 0.98612067, "reconstructed": 237}, {"Month": "1955-12-01T00:00:00", "Passengers": 278, "trend": 303.0, "detrend": 0.9174917490000001, "avg_seasonality": 0.902477105, "random_noise": 1.016637147, "reconstructed": 278}, {"Month": "1956-01-01T00:00:00", "Passengers": 284, "trend": 307.916666667, "detrend": 0.92232747, "avg_seasonality": 0.914742573, "random_noise": 1.008291837, "reconstructed": 284}, {"Month": "1956-02-01T00:00:00", "Passengers": 277, "trend": 312.0, "detrend": 0.887820513, "avg_seasonality": 0.887863451, "random_noise": 0.9999516390000001, "reconstructed": 277}, {"Month": "1956-03-01T00:00:00", "Passengers": 317, "trend": 316.833333333, "detrend": 1.0005260390000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.989696035, "reconstructed": 317}, {"Month": "1956-04-01T00:00:00", "Passengers": 313, "trend": 320.416666667, "detrend": 0.9768530559999999, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9980303070000001, "reconstructed": 313}, {"Month": "1956-05-01T00:00:00", "Passengers": 318, "trend": 323.083333333, "detrend": 0.984266185, "avg_seasonality": 0.983574383, "random_noise": 1.000703355, "reconstructed": 318}, {"Month": "1956-06-01T00:00:00", "Passengers": 374, "trend": 325.916666667, "detrend": 1.1475326000000001, "avg_seasonality": 1.115711184, "random_noise": 1.028521195, "reconstructed": 374}, {"Month": "1956-07-01T00:00:00", "Passengers": 413, "trend": 328.25, "detrend": 1.258187357, "avg_seasonality": 1.230005305, "random_noise": 1.022912139, "reconstructed": 413}, {"Month": "1956-08-01T00:00:00", "Passengers": 405, "trend": 330.833333333, "detrend": 1.22418136, "avg_seasonality": 1.222716522, "random_noise": 1.001198019, "reconstructed": 405}, {"Month": "1956-09-01T00:00:00", "Passengers": 355, "trend": 332.833333333, "detrend": 1.0665999, "avg_seasonality": 1.063440298, "random_noise": 1.0029711140000002, "reconstructed": 355}, {"Month": "1956-10-01T00:00:00", "Passengers": 306, "trend": 336.083333333, "detrend": 0.91048847, "avg_seasonality": 0.92450994, "random_noise": 0.9848336190000001, "reconstructed": 306}, {"Month": "1956-11-01T00:00:00", "Passengers": 271, "trend": 339.0, "detrend": 0.799410029, "avg_seasonality": 0.803798323, "random_noise": 0.9945405540000001, "reconstructed": 271}, {"Month": "1956-12-01T00:00:00", "Passengers": 306, "trend": 342.083333333, "detrend": 0.894518879, "avg_seasonality": 0.902477105, "random_noise": 0.991181798, "reconstructed": 306}, {"Month": "1957-01-01T00:00:00", "Passengers": 315, "trend": 346.08333333300004, "detrend": 0.9101854079999999, "avg_seasonality": 0.914742573, "random_noise": 0.99501809, "reconstructed": 315}, {"Month": "1957-02-01T00:00:00", "Passengers": 301, "trend": 350.41666666699996, "detrend": 0.858977408, "avg_seasonality": 0.887863451, "random_noise": 0.9674656690000001, "reconstructed": 301}, {"Month": "1957-03-01T00:00:00", "Passengers": 356, "trend": 355.58333333300004, "detrend": 1.001171783, "avg_seasonality": 1.0109427579999999, "random_noise": 0.99033479, "reconstructed": 356}, {"Month": "1957-04-01T00:00:00", "Passengers": 348, "trend": 359.66666666699996, "detrend": 0.967562558, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9885384, "reconstructed": 348}, {"Month": "1957-05-01T00:00:00", "Passengers": 355, "trend": 363.08333333300004, "detrend": 0.977736975, "avg_seasonality": 0.983574383, "random_noise": 0.9940651079999999, "reconstructed": 355}, {"Month": "1957-06-01T00:00:00", "Passengers": 422, "trend": 365.91666666699996, "detrend": 1.153268048, "avg_seasonality": 1.115711184, "random_noise": 1.033661816, "reconstructed": 422}, {"Month": "1957-07-01T00:00:00", "Passengers": 465, "trend": 368.41666666699996, "detrend": 1.262157883, "avg_seasonality": 1.230005305, "random_noise": 1.0261401940000001, "reconstructed": 465}, {"Month": "1957-08-01T00:00:00", "Passengers": 467, "trend": 370.5, "detrend": 1.260458839, "avg_seasonality": 1.222716522, "random_noise": 1.030867594, "reconstructed": 467}, {"Month": "1957-09-01T00:00:00", "Passengers": 404, "trend": 371.91666666699996, "detrend": 1.086264844, "avg_seasonality": 1.063440298, "random_noise": 1.021462932, "reconstructed": 404}, {"Month": "1957-10-01T00:00:00", "Passengers": 347, "trend": 372.41666666699996, "detrend": 0.93175207, "avg_seasonality": 0.92450994, "random_noise": 1.00783348, "reconstructed": 347}, {"Month": "1957-11-01T00:00:00", "Passengers": 305, "trend": 372.41666666699996, "detrend": 0.818975162, "avg_seasonality": 0.803798323, "random_noise": 1.018881402, "reconstructed": 305}, {"Month": "1957-12-01T00:00:00", "Passengers": 336, "trend": 373.08333333300004, "detrend": 0.900603082, "avg_seasonality": 0.902477105, "random_noise": 0.997923468, "reconstructed": 336}, {"Month": "1958-01-01T00:00:00", "Passengers": 340, "trend": 374.16666666699996, "detrend": 0.9086859690000001, "avg_seasonality": 0.914742573, "random_noise": 0.993378898, "reconstructed": 340}, {"Month": "1958-02-01T00:00:00", "Passengers": 318, "trend": 376.33333333300004, "detrend": 0.8449955709999999, "avg_seasonality": 0.887863451, "random_noise": 0.951717936, "reconstructed": 318}, {"Month": "1958-03-01T00:00:00", "Passengers": 362, "trend": 379.5, "detrend": 0.953886693, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9435615279999999, "reconstructed": 362}, {"Month": "1958-04-01T00:00:00", "Passengers": 348, "trend": 379.5, "detrend": 0.916996047, "avg_seasonality": 0.9787809540000001, "random_noise": 0.936875655, "reconstructed": 348}, {"Month": "1958-05-01T00:00:00", "Passengers": 363, "trend": 380.5, "detrend": 0.954007884, "avg_seasonality": 0.983574383, "random_noise": 0.969939743, "reconstructed": 363}, {"Month": "1958-06-01T00:00:00", "Passengers": 435, "trend": 380.91666666699996, "detrend": 1.141982061, "avg_seasonality": 1.115711184, "random_noise": 1.0235463059999999, "reconstructed": 435}, {"Month": "1958-07-01T00:00:00", "Passengers": 491, "trend": 381.0, "detrend": 1.2887139109999999, "avg_seasonality": 1.230005305, "random_noise": 1.047730368, "reconstructed": 491}, {"Month": "1958-08-01T00:00:00", "Passengers": 505, "trend": 382.66666666699996, "detrend": 1.319686411, "avg_seasonality": 1.222716522, "random_noise": 1.0793069259999999, "reconstructed": 505}, {"Month": "1958-09-01T00:00:00", "Passengers": 404, "trend": 384.66666666699996, "detrend": 1.050259965, "avg_seasonality": 1.063440298, "random_noise": 0.98760595, "reconstructed": 404}, {"Month": "1958-10-01T00:00:00", "Passengers": 359, "trend": 388.33333333300004, "detrend": 0.924463519, "avg_seasonality": 0.92450994, "random_noise": 0.9999497890000001, "reconstructed": 359}, {"Month": "1958-11-01T00:00:00", "Passengers": 310, "trend": 392.33333333300004, "detrend": 0.790144435, "avg_seasonality": 0.803798323, "random_noise": 0.9830132909999999, "reconstructed": 310}, {"Month": "1958-12-01T00:00:00", "Passengers": 337, "trend": 397.08333333300004, "detrend": 0.848688353, "avg_seasonality": 0.902477105, "random_noise": 0.940398762, "reconstructed": 337}, {"Month": "1959-01-01T00:00:00", "Passengers": 360, "trend": 400.16666666699996, "detrend": 0.8996251559999999, "avg_seasonality": 0.914742573, "random_noise": 0.983473583, "reconstructed": 360}, {"Month": "1959-02-01T00:00:00", "Passengers": 342, "trend": 404.91666666699996, "detrend": 0.844618234, "avg_seasonality": 0.887863451, "random_noise": 0.951292942, "reconstructed": 342}, {"Month": "1959-03-01T00:00:00", "Passengers": 406, "trend": 409.41666666699996, "detrend": 0.9916547929999999, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9809208140000001, "reconstructed": 406}, {"Month": "1959-04-01T00:00:00", "Passengers": 396, "trend": 414.33333333300004, "detrend": 0.955752212, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9764720170000001, "reconstructed": 396}, {"Month": "1959-05-01T00:00:00", "Passengers": 420, "trend": 418.33333333300004, "detrend": 1.003984064, "avg_seasonality": 0.983574383, "random_noise": 1.0207505209999999, "reconstructed": 420}, {"Month": "1959-06-01T00:00:00", "Passengers": 472, "trend": 422.66666666699996, "detrend": 1.116719243, "avg_seasonality": 1.115711184, "random_noise": 1.000903512, "reconstructed": 472}, {"Month": "1959-07-01T00:00:00", "Passengers": 548, "trend": 428.33333333300004, "detrend": 1.279377432, "avg_seasonality": 1.230005305, "random_noise": 1.040139767, "reconstructed": 548}, {"Month": "1959-08-01T00:00:00", "Passengers": 559, "trend": 433.08333333300004, "detrend": 1.29074466, "avg_seasonality": 1.222716522, "random_noise": 1.055636885, "reconstructed": 559}, {"Month": "1959-09-01T00:00:00", "Passengers": 463, "trend": 437.16666666699996, "detrend": 1.059092642, "avg_seasonality": 1.063440298, "random_noise": 0.995911707, "reconstructed": 463}, {"Month": "1959-10-01T00:00:00", "Passengers": 407, "trend": 438.25, "detrend": 0.928693668, "avg_seasonality": 0.92450994, "random_noise": 1.004525347, "reconstructed": 407}, {"Month": "1959-11-01T00:00:00", "Passengers": 362, "trend": 443.66666666699996, "detrend": 0.8159278740000001, "avg_seasonality": 0.803798323, "random_noise": 1.015090291, "reconstructed": 362}, {"Month": "1959-12-01T00:00:00", "Passengers": 405, "trend": 448.0, "detrend": 0.904017857, "avg_seasonality": 0.902477105, "random_noise": 1.001707248, "reconstructed": 405}, {"Month": "1960-01-01T00:00:00", "Passengers": 417, "trend": 453.25, "detrend": 0.920022063, "avg_seasonality": 0.914742573, "random_noise": 1.005771558, "reconstructed": 417}, {"Month": "1960-02-01T00:00:00", "Passengers": 391, "trend": 459.41666666699996, "detrend": 0.851079267, "avg_seasonality": 0.887863451, "random_noise": 0.9585699990000001, "reconstructed": 391}, {"Month": "1960-03-01T00:00:00", "Passengers": 419, "trend": 463.33333333300004, "detrend": 0.9043165470000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.894527944, "reconstructed": 419}, {"Month": "1960-04-01T00:00:00", "Passengers": 461, "trend": 467.08333333300004, "detrend": 0.9869759140000001, "avg_seasonality": 0.9787809540000001, "random_noise": 1.008372619, "reconstructed": 461}, {"Month": "1960-05-01T00:00:00", "Passengers": 472, "trend": 471.58333333300004, "detrend": 1.000883548, "avg_seasonality": 0.983574383, "random_noise": 1.0175982270000001, "reconstructed": 472}, {"Month": "1960-06-01T00:00:00", "Passengers": 535, "trend": 473.91666666699996, "detrend": 1.128890452, "avg_seasonality": 1.115711184, "random_noise": 1.0118124370000001, "reconstructed": 535}, {"Month": "1960-07-01T00:00:00", "Passengers": 622, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-08-01T00:00:00", "Passengers": 606, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-09-01T00:00:00", "Passengers": 508, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-10-01T00:00:00", "Passengers": 461, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-11-01T00:00:00", "Passengers": 390, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-12-01T00:00:00", "Passengers": 432, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}]}}, {"mode": "vega-lite"});
</script>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-7.-Extract-the-Random-Noise">
<a class="anchor" href="#Step-7.-Extract-the-Random-Noise" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 7. Extract the Random Noise<a class="anchor-link" href="#Step-7.-Extract-the-Random-Noise"> </a>
</h3>
<ul>
<li>To extract the random noise, we need to remove the seasonality. Seasonality is the average of the detrended data grouped by month in our case. And because our SQL query is getting pretty long, I'll but cutting it up in the examples, but a complete sql script can be found <a href="https://github.com/tadtenacious/timeseries/blob/master/sql/timeseries.sql">here</a>.</li>
</ul>
<div class="highlight"><pre><span></span><span class="p">),</span> <span class="n">detrend</span> <span class="k">AS</span> <span class="p">(</span>              
  <span class="k">SELECT</span>
    <span class="n">t</span><span class="p">.</span><span class="n">mnth</span>
    <span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">passengers</span>
    <span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">trend</span>
    <span class="p">,</span><span class="k">CAST</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">passengers</span> <span class="k">AS</span> <span class="nb">NUMERIC</span><span class="p">)</span> <span class="o">/</span> <span class="n">t</span><span class="p">.</span><span class="n">trend</span> <span class="k">AS</span> <span class="n">detrend</span>
  <span class="k">FROM</span> <span class="n">trend</span> <span class="n">t</span>
<span class="p">)</span>
<span class="k">SELECT</span>
  <span class="n">d</span><span class="p">.</span><span class="n">mnth</span>
  <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">passengers</span>
  <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">trend</span>
  <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">detrend</span>
  <span class="p">,</span><span class="k">AVG</span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="n">detrend</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="k">EXTRACT</span><span class="p">(</span><span class="k">MONTH</span> <span class="k">FROM</span> <span class="n">d</span><span class="p">.</span><span class="n">mnth</span><span class="p">))</span> <span class="k">AS</span> <span class="n">avg_seasonality</span>
<span class="k">FROM</span> <span class="n">detrend</span> <span class="n">d</span>
</pre></div>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mnth</th>
      <th>passengers</th>
      <th>trend</th>
      <th>avg_seasonality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6</th>
      <td>1949-07-01</td>
      <td>148</td>
      <td>126.666667</td>
      <td>1.230005</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1949-08-01</td>
      <td>148</td>
      <td>126.916667</td>
      <td>1.222717</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1949-09-01</td>
      <td>136</td>
      <td>127.583333</td>
      <td>1.063440</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1949-10-01</td>
      <td>119</td>
      <td>128.333333</td>
      <td>0.924510</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1949-11-01</td>
      <td>104</td>
      <td>128.833333</td>
      <td>0.803798</td>
    </tr>
    <tr>
      <th>11</th>
      <td>1949-12-01</td>
      <td>118</td>
      <td>129.166667</td>
      <td>0.902477</td>
    </tr>
    <tr>
      <th>12</th>
      <td>1950-01-01</td>
      <td>115</td>
      <td>130.333333</td>
      <td>0.914743</td>
    </tr>
    <tr>
      <th>13</th>
      <td>1950-02-01</td>
      <td>126</td>
      <td>132.166667</td>
      <td>0.887863</td>
    </tr>
    <tr>
      <th>14</th>
      <td>1950-03-01</td>
      <td>141</td>
      <td>134.000000</td>
      <td>1.010943</td>
    </tr>
    <tr>
      <th>15</th>
      <td>1950-04-01</td>
      <td>135</td>
      <td>135.833333</td>
      <td>0.978781</td>
    </tr>
    <tr>
      <th>16</th>
      <td>1950-05-01</td>
      <td>125</td>
      <td>137.000000</td>
      <td>0.983574</td>
    </tr>
    <tr>
      <th>17</th>
      <td>1950-06-01</td>
      <td>149</td>
      <td>137.833333</td>
      <td>1.115711</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Given our equation for multiplicative time series is <code>time series = trend * seasonality * random noise</code>, we simply isoloate the variable <code>random noise</code> to get <code>random noise = time series / (seasonality * trend)</code>
</li>
</ul>
<div class="highlight"><pre><span></span><span class="p">),</span> <span class="n">seasonality</span> <span class="k">AS</span> <span class="p">(</span>
<span class="k">SELECT</span>
  <span class="n">d</span><span class="p">.</span><span class="n">mnth</span>
  <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">passengers</span>
  <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">trend</span>
  <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">detrend</span>
  <span class="p">,</span><span class="k">AVG</span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="n">detrend</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="k">EXTRACT</span><span class="p">(</span><span class="k">MONTH</span> <span class="k">FROM</span> <span class="n">d</span><span class="p">.</span><span class="n">mnth</span><span class="p">))</span> <span class="k">AS</span> <span class="n">avg_seasonality</span>
<span class="k">FROM</span> <span class="n">detrend</span> <span class="n">d</span>
<span class="p">)</span>
<span class="k">SELECT</span>
  <span class="n">s</span><span class="p">.</span><span class="n">mnth</span>
  <span class="p">,</span><span class="n">s</span><span class="p">.</span><span class="n">Passengers</span>
  <span class="p">,</span><span class="n">s</span><span class="p">.</span><span class="n">trend</span>
  <span class="p">,</span><span class="n">s</span><span class="p">.</span><span class="n">detrend</span>
  <span class="p">,</span><span class="n">s</span><span class="p">.</span><span class="n">avg_seasonality</span>
  <span class="p">,</span><span class="n">s</span><span class="p">.</span><span class="n">Passengers</span> <span class="o">/</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">avg_seasonality</span> <span class="o">*</span> <span class="n">s</span><span class="p">.</span><span class="n">trend</span><span class="p">)</span> <span class="k">AS</span> <span class="n">random_noise</span>
<span class="k">FROM</span> <span class="n">seasonality</span> <span class="n">s</span>
</pre></div>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mnth</th>
      <th>passengers</th>
      <th>trend</th>
      <th>avg_seasonality</th>
      <th>random_noise</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6</th>
      <td>1949-07-01</td>
      <td>148</td>
      <td>126.666667</td>
      <td>1.230005</td>
      <td>0.949932</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1949-08-01</td>
      <td>148</td>
      <td>126.916667</td>
      <td>1.222717</td>
      <td>0.953712</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1949-09-01</td>
      <td>136</td>
      <td>127.583333</td>
      <td>1.063440</td>
      <td>1.002379</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1949-10-01</td>
      <td>119</td>
      <td>128.333333</td>
      <td>0.924510</td>
      <td>1.002988</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1949-11-01</td>
      <td>104</td>
      <td>128.833333</td>
      <td>0.803798</td>
      <td>1.004287</td>
    </tr>
    <tr>
      <th>11</th>
      <td>1949-12-01</td>
      <td>118</td>
      <td>129.166667</td>
      <td>0.902477</td>
      <td>1.012268</td>
    </tr>
    <tr>
      <th>12</th>
      <td>1950-01-01</td>
      <td>115</td>
      <td>130.333333</td>
      <td>0.914743</td>
      <td>0.964592</td>
    </tr>
    <tr>
      <th>13</th>
      <td>1950-02-01</td>
      <td>126</td>
      <td>132.166667</td>
      <td>0.887863</td>
      <td>1.073748</td>
    </tr>
    <tr>
      <th>14</th>
      <td>1950-03-01</td>
      <td>141</td>
      <td>134.000000</td>
      <td>1.010943</td>
      <td>1.040849</td>
    </tr>
    <tr>
      <th>15</th>
      <td>1950-04-01</td>
      <td>135</td>
      <td>135.833333</td>
      <td>0.978781</td>
      <td>1.015411</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-94189c14033f493fb1c3faa477dc01ea"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-94189c14033f493fb1c3faa477dc01ea") {
      outputDiv = document.getElementById("altair-viz-94189c14033f493fb1c3faa477dc01ea");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-ed5047944c212044212fa68385ad6894"}, "mark": "line", "encoding": {"x": {"type": "temporal", "field": "Month"}, "y": {"type": "quantitative", "field": "random_noise"}}, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-ed5047944c212044212fa68385ad6894": [{"Month": "1949-01-01T00:00:00", "Passengers": 112, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-02-01T00:00:00", "Passengers": 118, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-03-01T00:00:00", "Passengers": 132, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-04-01T00:00:00", "Passengers": 129, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-05-01T00:00:00", "Passengers": 121, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-06-01T00:00:00", "Passengers": 135, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-07-01T00:00:00", "Passengers": 148, "trend": 126.666666667, "detrend": 1.1684210529999999, "avg_seasonality": 1.230005305, "random_noise": 0.949931718, "reconstructed": 148}, {"Month": "1949-08-01T00:00:00", "Passengers": 148, "trend": 126.916666667, "detrend": 1.1661195009999998, "avg_seasonality": 1.222716522, "random_noise": 0.953712067, "reconstructed": 148}, {"Month": "1949-09-01T00:00:00", "Passengers": 136, "trend": 127.583333333, "detrend": 1.065969954, "avg_seasonality": 1.063440298, "random_noise": 1.002378748, "reconstructed": 136}, {"Month": "1949-10-01T00:00:00", "Passengers": 119, "trend": 128.33333333299998, "detrend": 0.9272727270000001, "avg_seasonality": 0.92450994, "random_noise": 1.00298838, "reconstructed": 119}, {"Month": "1949-11-01T00:00:00", "Passengers": 104, "trend": 128.83333333299998, "detrend": 0.807244502, "avg_seasonality": 0.803798323, "random_noise": 1.004287368, "reconstructed": 104}, {"Month": "1949-12-01T00:00:00", "Passengers": 118, "trend": 129.16666666700002, "detrend": 0.9135483870000001, "avg_seasonality": 0.902477105, "random_noise": 1.01226766, "reconstructed": 118}, {"Month": "1950-01-01T00:00:00", "Passengers": 115, "trend": 130.33333333299998, "detrend": 0.882352941, "avg_seasonality": 0.914742573, "random_noise": 0.964591533, "reconstructed": 115}, {"Month": "1950-02-01T00:00:00", "Passengers": 126, "trend": 132.16666666700002, "detrend": 0.95334174, "avg_seasonality": 0.887863451, "random_noise": 1.073748153, "reconstructed": 126}, {"Month": "1950-03-01T00:00:00", "Passengers": 141, "trend": 134.0, "detrend": 1.0522388059999999, "avg_seasonality": 1.0109427579999999, "random_noise": 1.040849047, "reconstructed": 141}, {"Month": "1950-04-01T00:00:00", "Passengers": 135, "trend": 135.83333333299998, "detrend": 0.9938650309999999, "avg_seasonality": 0.9787809540000001, "random_noise": 1.015411085, "reconstructed": 135}, {"Month": "1950-05-01T00:00:00", "Passengers": 125, "trend": 137.0, "detrend": 0.9124087590000001, "avg_seasonality": 0.983574383, "random_noise": 0.9276459159999999, "reconstructed": 125}, {"Month": "1950-06-01T00:00:00", "Passengers": 149, "trend": 137.83333333299998, "detrend": 1.081015719, "avg_seasonality": 1.115711184, "random_noise": 0.968902826, "reconstructed": 149}, {"Month": "1950-07-01T00:00:00", "Passengers": 170, "trend": 139.66666666700002, "detrend": 1.217183771, "avg_seasonality": 1.230005305, "random_noise": 0.989576033, "reconstructed": 170}, {"Month": "1950-08-01T00:00:00", "Passengers": 170, "trend": 142.16666666700002, "detrend": 1.195779601, "avg_seasonality": 1.222716522, "random_noise": 0.9779696109999999, "reconstructed": 170}, {"Month": "1950-09-01T00:00:00", "Passengers": 158, "trend": 144.16666666700002, "detrend": 1.095953757, "avg_seasonality": 1.063440298, "random_noise": 1.030573845, "reconstructed": 158}, {"Month": "1950-10-01T00:00:00", "Passengers": 133, "trend": 147.25, "detrend": 0.9032258059999999, "avg_seasonality": 0.92450994, "random_noise": 0.976977929, "reconstructed": 133}, {"Month": "1950-11-01T00:00:00", "Passengers": 114, "trend": 149.58333333299998, "detrend": 0.762116992, "avg_seasonality": 0.803798323, "random_noise": 0.9481445409999999, "reconstructed": 114}, {"Month": "1950-12-01T00:00:00", "Passengers": 140, "trend": 153.5, "detrend": 0.912052117, "avg_seasonality": 0.902477105, "random_noise": 1.010609701, "reconstructed": 140}, {"Month": "1951-01-01T00:00:00", "Passengers": 145, "trend": 155.91666666700002, "detrend": 0.929983966, "avg_seasonality": 0.914742573, "random_noise": 1.0166619479999999, "reconstructed": 145}, {"Month": "1951-02-01T00:00:00", "Passengers": 150, "trend": 158.33333333299998, "detrend": 0.947368421, "avg_seasonality": 0.887863451, "random_noise": 1.067020407, "reconstructed": 150}, {"Month": "1951-03-01T00:00:00", "Passengers": 178, "trend": 160.75, "detrend": 1.107309487, "avg_seasonality": 1.0109427579999999, "random_noise": 1.095323625, "reconstructed": 178}, {"Month": "1951-04-01T00:00:00", "Passengers": 163, "trend": 162.91666666700002, "detrend": 1.000511509, "avg_seasonality": 0.9787809540000001, "random_noise": 1.022201653, "reconstructed": 163}, {"Month": "1951-05-01T00:00:00", "Passengers": 172, "trend": 165.33333333299998, "detrend": 1.0403225809999999, "avg_seasonality": 0.983574383, "random_noise": 1.057695888, "reconstructed": 172}, {"Month": "1951-06-01T00:00:00", "Passengers": 178, "trend": 168.0, "detrend": 1.05952381, "avg_seasonality": 1.115711184, "random_noise": 0.949639857, "reconstructed": 178}, {"Month": "1951-07-01T00:00:00", "Passengers": 199, "trend": 170.16666666700002, "detrend": 1.1694417240000001, "avg_seasonality": 1.230005305, "random_noise": 0.950761528, "reconstructed": 199}, {"Month": "1951-08-01T00:00:00", "Passengers": 199, "trend": 172.33333333299998, "detrend": 1.154738878, "avg_seasonality": 1.222716522, "random_noise": 0.944404412, "reconstructed": 199}, {"Month": "1951-09-01T00:00:00", "Passengers": 184, "trend": 174.83333333299998, "detrend": 1.052430887, "avg_seasonality": 1.063440298, "random_noise": 0.989647363, "reconstructed": 184}, {"Month": "1951-10-01T00:00:00", "Passengers": 162, "trend": 176.08333333299998, "detrend": 0.92001893, "avg_seasonality": 0.92450994, "random_noise": 0.9951422809999999, "reconstructed": 162}, {"Month": "1951-11-01T00:00:00", "Passengers": 146, "trend": 177.58333333299998, "detrend": 0.822149226, "avg_seasonality": 0.803798323, "random_noise": 1.0228302329999999, "reconstructed": 146}, {"Month": "1951-12-01T00:00:00", "Passengers": 166, "trend": 178.5, "detrend": 0.9299719890000001, "avg_seasonality": 0.902477105, "random_noise": 1.030466018, "reconstructed": 166}, {"Month": "1952-01-01T00:00:00", "Passengers": 171, "trend": 181.83333333299998, "detrend": 0.9404216320000001, "avg_seasonality": 0.914742573, "random_noise": 1.028072443, "reconstructed": 171}, {"Month": "1952-02-01T00:00:00", "Passengers": 180, "trend": 184.41666666700002, "detrend": 0.97605061, "avg_seasonality": 0.887863451, "random_noise": 1.0993251370000001, "reconstructed": 180}, {"Month": "1952-03-01T00:00:00", "Passengers": 193, "trend": 188.0, "detrend": 1.026595745, "avg_seasonality": 1.0109427579999999, "random_noise": 1.015483554, "reconstructed": 193}, {"Month": "1952-04-01T00:00:00", "Passengers": 181, "trend": 190.08333333299998, "detrend": 0.9522139409999999, "avg_seasonality": 0.9787809540000001, "random_noise": 0.97285704, "reconstructed": 181}, {"Month": "1952-05-01T00:00:00", "Passengers": 183, "trend": 192.5, "detrend": 0.9506493509999999, "avg_seasonality": 0.983574383, "random_noise": 0.9665251220000001, "reconstructed": 183}, {"Month": "1952-06-01T00:00:00", "Passengers": 218, "trend": 194.66666666700002, "detrend": 1.119863014, "avg_seasonality": 1.115711184, "random_noise": 1.003721241, "reconstructed": 218}, {"Month": "1952-07-01T00:00:00", "Passengers": 230, "trend": 197.0, "detrend": 1.16751269, "avg_seasonality": 1.230005305, "random_noise": 0.949193215, "reconstructed": 230}, {"Month": "1952-08-01T00:00:00", "Passengers": 242, "trend": 199.08333333299998, "detrend": 1.215571369, "avg_seasonality": 1.222716522, "random_noise": 0.9941563290000001, "reconstructed": 242}, {"Month": "1952-09-01T00:00:00", "Passengers": 209, "trend": 200.41666666700002, "detrend": 1.042827443, "avg_seasonality": 1.063440298, "random_noise": 0.98061682, "reconstructed": 209}, {"Month": "1952-10-01T00:00:00", "Passengers": 191, "trend": 204.0, "detrend": 0.93627451, "avg_seasonality": 0.92450994, "random_noise": 1.0127251959999999, "reconstructed": 191}, {"Month": "1952-11-01T00:00:00", "Passengers": 172, "trend": 208.5, "detrend": 0.824940048, "avg_seasonality": 0.803798323, "random_noise": 1.026302276, "reconstructed": 172}, {"Month": "1952-12-01T00:00:00", "Passengers": 194, "trend": 212.33333333299998, "detrend": 0.9136577709999999, "avg_seasonality": 0.902477105, "random_noise": 1.012388864, "reconstructed": 194}, {"Month": "1953-01-01T00:00:00", "Passengers": 196, "trend": 214.41666666700002, "detrend": 0.914108045, "avg_seasonality": 0.914742573, "random_noise": 0.9993063320000001, "reconstructed": 196}, {"Month": "1953-02-01T00:00:00", "Passengers": 196, "trend": 217.25, "detrend": 0.9021864209999999, "avg_seasonality": 0.887863451, "random_noise": 1.016131952, "reconstructed": 196}, {"Month": "1953-03-01T00:00:00", "Passengers": 236, "trend": 219.75, "detrend": 1.073947668, "avg_seasonality": 1.0109427579999999, "random_noise": 1.062322925, "reconstructed": 236}, {"Month": "1953-04-01T00:00:00", "Passengers": 235, "trend": 222.08333333299998, "detrend": 1.0581613509999999, "avg_seasonality": 0.9787809540000001, "random_noise": 1.081101289, "reconstructed": 235}, {"Month": "1953-05-01T00:00:00", "Passengers": 229, "trend": 223.75, "detrend": 1.023463687, "avg_seasonality": 0.983574383, "random_noise": 1.040555452, "reconstructed": 229}, {"Month": "1953-06-01T00:00:00", "Passengers": 243, "trend": 224.41666666700002, "detrend": 1.082807278, "avg_seasonality": 1.115711184, "random_noise": 0.9705085809999999, "reconstructed": 243}, {"Month": "1953-07-01T00:00:00", "Passengers": 264, "trend": 225.0, "detrend": 1.173333333, "avg_seasonality": 1.230005305, "random_noise": 0.953925425, "reconstructed": 264}, {"Month": "1953-08-01T00:00:00", "Passengers": 272, "trend": 225.66666666700002, "detrend": 1.205317578, "avg_seasonality": 1.222716522, "random_noise": 0.985770255, "reconstructed": 272}, {"Month": "1953-09-01T00:00:00", "Passengers": 237, "trend": 225.0, "detrend": 1.0533333329999999, "avg_seasonality": 1.063440298, "random_noise": 0.9904959740000001, "reconstructed": 237}, {"Month": "1953-10-01T00:00:00", "Passengers": 211, "trend": 224.91666666700002, "detrend": 0.938125232, "avg_seasonality": 0.92450994, "random_noise": 1.014727036, "reconstructed": 211}, {"Month": "1953-11-01T00:00:00", "Passengers": 180, "trend": 224.25, "detrend": 0.802675585, "avg_seasonality": 0.803798323, "random_noise": 0.99860321, "reconstructed": 180}, {"Month": "1953-12-01T00:00:00", "Passengers": 201, "trend": 224.66666666700002, "detrend": 0.8946587540000001, "avg_seasonality": 0.902477105, "random_noise": 0.991336787, "reconstructed": 201}, {"Month": "1954-01-01T00:00:00", "Passengers": 204, "trend": 226.41666666700002, "detrend": 0.900993743, "avg_seasonality": 0.914742573, "random_noise": 0.9849697279999999, "reconstructed": 204}, {"Month": "1954-02-01T00:00:00", "Passengers": 188, "trend": 229.58333333299998, "detrend": 0.818874773, "avg_seasonality": 0.887863451, "random_noise": 0.922298099, "reconstructed": 188}, {"Month": "1954-03-01T00:00:00", "Passengers": 235, "trend": 231.33333333299998, "detrend": 1.015850144, "avg_seasonality": 1.0109427579999999, "random_noise": 1.004854267, "reconstructed": 235}, {"Month": "1954-04-01T00:00:00", "Passengers": 227, "trend": 233.16666666700002, "detrend": 0.973552538, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9946582359999999, "reconstructed": 227}, {"Month": "1954-05-01T00:00:00", "Passengers": 234, "trend": 234.66666666700002, "detrend": 0.9971590909999999, "avg_seasonality": 0.983574383, "random_noise": 1.013811571, "reconstructed": 234}, {"Month": "1954-06-01T00:00:00", "Passengers": 264, "trend": 236.58333333299998, "detrend": 1.115885875, "avg_seasonality": 1.115711184, "random_noise": 1.000156574, "reconstructed": 264}, {"Month": "1954-07-01T00:00:00", "Passengers": 302, "trend": 238.91666666700002, "detrend": 1.264039065, "avg_seasonality": 1.230005305, "random_noise": 1.027669604, "reconstructed": 302}, {"Month": "1954-08-01T00:00:00", "Passengers": 293, "trend": 242.08333333299998, "detrend": 1.210327022, "avg_seasonality": 1.222716522, "random_noise": 0.989867235, "reconstructed": 293}, {"Month": "1954-09-01T00:00:00", "Passengers": 259, "trend": 245.83333333299998, "detrend": 1.0535593220000001, "avg_seasonality": 1.063440298, "random_noise": 0.990708481, "reconstructed": 259}, {"Month": "1954-10-01T00:00:00", "Passengers": 229, "trend": 248.5, "detrend": 0.921529175, "avg_seasonality": 0.92450994, "random_noise": 0.996775843, "reconstructed": 229}, {"Month": "1954-11-01T00:00:00", "Passengers": 203, "trend": 252.0, "detrend": 0.805555556, "avg_seasonality": 0.803798323, "random_noise": 1.002186161, "reconstructed": 203}, {"Month": "1954-12-01T00:00:00", "Passengers": 229, "trend": 255.0, "detrend": 0.8980392159999999, "avg_seasonality": 0.902477105, "random_noise": 0.9950825459999999, "reconstructed": 229}, {"Month": "1955-01-01T00:00:00", "Passengers": 242, "trend": 259.25, "detrend": 0.933461909, "avg_seasonality": 0.914742573, "random_noise": 1.020464048, "reconstructed": 242}, {"Month": "1955-02-01T00:00:00", "Passengers": 233, "trend": 264.416666667, "detrend": 0.8811849979999999, "avg_seasonality": 0.887863451, "random_noise": 0.992478063, "reconstructed": 233}, {"Month": "1955-03-01T00:00:00", "Passengers": 267, "trend": 268.916666667, "detrend": 0.9928726370000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9821254759999999, "reconstructed": 267}, {"Month": "1955-04-01T00:00:00", "Passengers": 269, "trend": 273.333333333, "detrend": 0.984146341, "avg_seasonality": 0.9787809540000001, "random_noise": 1.0054817040000001, "reconstructed": 269}, {"Month": "1955-05-01T00:00:00", "Passengers": 270, "trend": 277.083333333, "detrend": 0.97443609, "avg_seasonality": 0.983574383, "random_noise": 0.990709098, "reconstructed": 270}, {"Month": "1955-06-01T00:00:00", "Passengers": 315, "trend": 279.916666667, "detrend": 1.1253349209999999, "avg_seasonality": 1.115711184, "random_noise": 1.008625653, "reconstructed": 315}, {"Month": "1955-07-01T00:00:00", "Passengers": 364, "trend": 284.0, "detrend": 1.281690141, "avg_seasonality": 1.230005305, "random_noise": 1.042020011, "reconstructed": 364}, {"Month": "1955-08-01T00:00:00", "Passengers": 347, "trend": 287.5, "detrend": 1.206956522, "avg_seasonality": 1.222716522, "random_noise": 0.987110667, "reconstructed": 347}, {"Month": "1955-09-01T00:00:00", "Passengers": 312, "trend": 291.166666667, "detrend": 1.071551231, "avg_seasonality": 1.063440298, "random_noise": 1.007627069, "reconstructed": 312}, {"Month": "1955-10-01T00:00:00", "Passengers": 274, "trend": 295.333333333, "detrend": 0.927765237, "avg_seasonality": 0.92450994, "random_noise": 1.003521105, "reconstructed": 274}, {"Month": "1955-11-01T00:00:00", "Passengers": 237, "trend": 299.0, "detrend": 0.79264214, "avg_seasonality": 0.803798323, "random_noise": 0.98612067, "reconstructed": 237}, {"Month": "1955-12-01T00:00:00", "Passengers": 278, "trend": 303.0, "detrend": 0.9174917490000001, "avg_seasonality": 0.902477105, "random_noise": 1.016637147, "reconstructed": 278}, {"Month": "1956-01-01T00:00:00", "Passengers": 284, "trend": 307.916666667, "detrend": 0.92232747, "avg_seasonality": 0.914742573, "random_noise": 1.008291837, "reconstructed": 284}, {"Month": "1956-02-01T00:00:00", "Passengers": 277, "trend": 312.0, "detrend": 0.887820513, "avg_seasonality": 0.887863451, "random_noise": 0.9999516390000001, "reconstructed": 277}, {"Month": "1956-03-01T00:00:00", "Passengers": 317, "trend": 316.833333333, "detrend": 1.0005260390000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.989696035, "reconstructed": 317}, {"Month": "1956-04-01T00:00:00", "Passengers": 313, "trend": 320.416666667, "detrend": 0.9768530559999999, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9980303070000001, "reconstructed": 313}, {"Month": "1956-05-01T00:00:00", "Passengers": 318, "trend": 323.083333333, "detrend": 0.984266185, "avg_seasonality": 0.983574383, "random_noise": 1.000703355, "reconstructed": 318}, {"Month": "1956-06-01T00:00:00", "Passengers": 374, "trend": 325.916666667, "detrend": 1.1475326000000001, "avg_seasonality": 1.115711184, "random_noise": 1.028521195, "reconstructed": 374}, {"Month": "1956-07-01T00:00:00", "Passengers": 413, "trend": 328.25, "detrend": 1.258187357, "avg_seasonality": 1.230005305, "random_noise": 1.022912139, "reconstructed": 413}, {"Month": "1956-08-01T00:00:00", "Passengers": 405, "trend": 330.833333333, "detrend": 1.22418136, "avg_seasonality": 1.222716522, "random_noise": 1.001198019, "reconstructed": 405}, {"Month": "1956-09-01T00:00:00", "Passengers": 355, "trend": 332.833333333, "detrend": 1.0665999, "avg_seasonality": 1.063440298, "random_noise": 1.0029711140000002, "reconstructed": 355}, {"Month": "1956-10-01T00:00:00", "Passengers": 306, "trend": 336.083333333, "detrend": 0.91048847, "avg_seasonality": 0.92450994, "random_noise": 0.9848336190000001, "reconstructed": 306}, {"Month": "1956-11-01T00:00:00", "Passengers": 271, "trend": 339.0, "detrend": 0.799410029, "avg_seasonality": 0.803798323, "random_noise": 0.9945405540000001, "reconstructed": 271}, {"Month": "1956-12-01T00:00:00", "Passengers": 306, "trend": 342.083333333, "detrend": 0.894518879, "avg_seasonality": 0.902477105, "random_noise": 0.991181798, "reconstructed": 306}, {"Month": "1957-01-01T00:00:00", "Passengers": 315, "trend": 346.08333333300004, "detrend": 0.9101854079999999, "avg_seasonality": 0.914742573, "random_noise": 0.99501809, "reconstructed": 315}, {"Month": "1957-02-01T00:00:00", "Passengers": 301, "trend": 350.41666666699996, "detrend": 0.858977408, "avg_seasonality": 0.887863451, "random_noise": 0.9674656690000001, "reconstructed": 301}, {"Month": "1957-03-01T00:00:00", "Passengers": 356, "trend": 355.58333333300004, "detrend": 1.001171783, "avg_seasonality": 1.0109427579999999, "random_noise": 0.99033479, "reconstructed": 356}, {"Month": "1957-04-01T00:00:00", "Passengers": 348, "trend": 359.66666666699996, "detrend": 0.967562558, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9885384, "reconstructed": 348}, {"Month": "1957-05-01T00:00:00", "Passengers": 355, "trend": 363.08333333300004, "detrend": 0.977736975, "avg_seasonality": 0.983574383, "random_noise": 0.9940651079999999, "reconstructed": 355}, {"Month": "1957-06-01T00:00:00", "Passengers": 422, "trend": 365.91666666699996, "detrend": 1.153268048, "avg_seasonality": 1.115711184, "random_noise": 1.033661816, "reconstructed": 422}, {"Month": "1957-07-01T00:00:00", "Passengers": 465, "trend": 368.41666666699996, "detrend": 1.262157883, "avg_seasonality": 1.230005305, "random_noise": 1.0261401940000001, "reconstructed": 465}, {"Month": "1957-08-01T00:00:00", "Passengers": 467, "trend": 370.5, "detrend": 1.260458839, "avg_seasonality": 1.222716522, "random_noise": 1.030867594, "reconstructed": 467}, {"Month": "1957-09-01T00:00:00", "Passengers": 404, "trend": 371.91666666699996, "detrend": 1.086264844, "avg_seasonality": 1.063440298, "random_noise": 1.021462932, "reconstructed": 404}, {"Month": "1957-10-01T00:00:00", "Passengers": 347, "trend": 372.41666666699996, "detrend": 0.93175207, "avg_seasonality": 0.92450994, "random_noise": 1.00783348, "reconstructed": 347}, {"Month": "1957-11-01T00:00:00", "Passengers": 305, "trend": 372.41666666699996, "detrend": 0.818975162, "avg_seasonality": 0.803798323, "random_noise": 1.018881402, "reconstructed": 305}, {"Month": "1957-12-01T00:00:00", "Passengers": 336, "trend": 373.08333333300004, "detrend": 0.900603082, "avg_seasonality": 0.902477105, "random_noise": 0.997923468, "reconstructed": 336}, {"Month": "1958-01-01T00:00:00", "Passengers": 340, "trend": 374.16666666699996, "detrend": 0.9086859690000001, "avg_seasonality": 0.914742573, "random_noise": 0.993378898, "reconstructed": 340}, {"Month": "1958-02-01T00:00:00", "Passengers": 318, "trend": 376.33333333300004, "detrend": 0.8449955709999999, "avg_seasonality": 0.887863451, "random_noise": 0.951717936, "reconstructed": 318}, {"Month": "1958-03-01T00:00:00", "Passengers": 362, "trend": 379.5, "detrend": 0.953886693, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9435615279999999, "reconstructed": 362}, {"Month": "1958-04-01T00:00:00", "Passengers": 348, "trend": 379.5, "detrend": 0.916996047, "avg_seasonality": 0.9787809540000001, "random_noise": 0.936875655, "reconstructed": 348}, {"Month": "1958-05-01T00:00:00", "Passengers": 363, "trend": 380.5, "detrend": 0.954007884, "avg_seasonality": 0.983574383, "random_noise": 0.969939743, "reconstructed": 363}, {"Month": "1958-06-01T00:00:00", "Passengers": 435, "trend": 380.91666666699996, "detrend": 1.141982061, "avg_seasonality": 1.115711184, "random_noise": 1.0235463059999999, "reconstructed": 435}, {"Month": "1958-07-01T00:00:00", "Passengers": 491, "trend": 381.0, "detrend": 1.2887139109999999, "avg_seasonality": 1.230005305, "random_noise": 1.047730368, "reconstructed": 491}, {"Month": "1958-08-01T00:00:00", "Passengers": 505, "trend": 382.66666666699996, "detrend": 1.319686411, "avg_seasonality": 1.222716522, "random_noise": 1.0793069259999999, "reconstructed": 505}, {"Month": "1958-09-01T00:00:00", "Passengers": 404, "trend": 384.66666666699996, "detrend": 1.050259965, "avg_seasonality": 1.063440298, "random_noise": 0.98760595, "reconstructed": 404}, {"Month": "1958-10-01T00:00:00", "Passengers": 359, "trend": 388.33333333300004, "detrend": 0.924463519, "avg_seasonality": 0.92450994, "random_noise": 0.9999497890000001, "reconstructed": 359}, {"Month": "1958-11-01T00:00:00", "Passengers": 310, "trend": 392.33333333300004, "detrend": 0.790144435, "avg_seasonality": 0.803798323, "random_noise": 0.9830132909999999, "reconstructed": 310}, {"Month": "1958-12-01T00:00:00", "Passengers": 337, "trend": 397.08333333300004, "detrend": 0.848688353, "avg_seasonality": 0.902477105, "random_noise": 0.940398762, "reconstructed": 337}, {"Month": "1959-01-01T00:00:00", "Passengers": 360, "trend": 400.16666666699996, "detrend": 0.8996251559999999, "avg_seasonality": 0.914742573, "random_noise": 0.983473583, "reconstructed": 360}, {"Month": "1959-02-01T00:00:00", "Passengers": 342, "trend": 404.91666666699996, "detrend": 0.844618234, "avg_seasonality": 0.887863451, "random_noise": 0.951292942, "reconstructed": 342}, {"Month": "1959-03-01T00:00:00", "Passengers": 406, "trend": 409.41666666699996, "detrend": 0.9916547929999999, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9809208140000001, "reconstructed": 406}, {"Month": "1959-04-01T00:00:00", "Passengers": 396, "trend": 414.33333333300004, "detrend": 0.955752212, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9764720170000001, "reconstructed": 396}, {"Month": "1959-05-01T00:00:00", "Passengers": 420, "trend": 418.33333333300004, "detrend": 1.003984064, "avg_seasonality": 0.983574383, "random_noise": 1.0207505209999999, "reconstructed": 420}, {"Month": "1959-06-01T00:00:00", "Passengers": 472, "trend": 422.66666666699996, "detrend": 1.116719243, "avg_seasonality": 1.115711184, "random_noise": 1.000903512, "reconstructed": 472}, {"Month": "1959-07-01T00:00:00", "Passengers": 548, "trend": 428.33333333300004, "detrend": 1.279377432, "avg_seasonality": 1.230005305, "random_noise": 1.040139767, "reconstructed": 548}, {"Month": "1959-08-01T00:00:00", "Passengers": 559, "trend": 433.08333333300004, "detrend": 1.29074466, "avg_seasonality": 1.222716522, "random_noise": 1.055636885, "reconstructed": 559}, {"Month": "1959-09-01T00:00:00", "Passengers": 463, "trend": 437.16666666699996, "detrend": 1.059092642, "avg_seasonality": 1.063440298, "random_noise": 0.995911707, "reconstructed": 463}, {"Month": "1959-10-01T00:00:00", "Passengers": 407, "trend": 438.25, "detrend": 0.928693668, "avg_seasonality": 0.92450994, "random_noise": 1.004525347, "reconstructed": 407}, {"Month": "1959-11-01T00:00:00", "Passengers": 362, "trend": 443.66666666699996, "detrend": 0.8159278740000001, "avg_seasonality": 0.803798323, "random_noise": 1.015090291, "reconstructed": 362}, {"Month": "1959-12-01T00:00:00", "Passengers": 405, "trend": 448.0, "detrend": 0.904017857, "avg_seasonality": 0.902477105, "random_noise": 1.001707248, "reconstructed": 405}, {"Month": "1960-01-01T00:00:00", "Passengers": 417, "trend": 453.25, "detrend": 0.920022063, "avg_seasonality": 0.914742573, "random_noise": 1.005771558, "reconstructed": 417}, {"Month": "1960-02-01T00:00:00", "Passengers": 391, "trend": 459.41666666699996, "detrend": 0.851079267, "avg_seasonality": 0.887863451, "random_noise": 0.9585699990000001, "reconstructed": 391}, {"Month": "1960-03-01T00:00:00", "Passengers": 419, "trend": 463.33333333300004, "detrend": 0.9043165470000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.894527944, "reconstructed": 419}, {"Month": "1960-04-01T00:00:00", "Passengers": 461, "trend": 467.08333333300004, "detrend": 0.9869759140000001, "avg_seasonality": 0.9787809540000001, "random_noise": 1.008372619, "reconstructed": 461}, {"Month": "1960-05-01T00:00:00", "Passengers": 472, "trend": 471.58333333300004, "detrend": 1.000883548, "avg_seasonality": 0.983574383, "random_noise": 1.0175982270000001, "reconstructed": 472}, {"Month": "1960-06-01T00:00:00", "Passengers": 535, "trend": 473.91666666699996, "detrend": 1.128890452, "avg_seasonality": 1.115711184, "random_noise": 1.0118124370000001, "reconstructed": 535}, {"Month": "1960-07-01T00:00:00", "Passengers": 622, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-08-01T00:00:00", "Passengers": 606, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-09-01T00:00:00", "Passengers": 508, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-10-01T00:00:00", "Passengers": 461, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-11-01T00:00:00", "Passengers": 390, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-12-01T00:00:00", "Passengers": 432, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}]}}, {"mode": "vega-lite"});
</script>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-8.-Reconstruct-the-Time-Series">
<a class="anchor" href="#Step-8.-Reconstruct-the-Time-Series" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 8. Reconstruct the Time Series<a class="anchor-link" href="#Step-8.-Reconstruct-the-Time-Series"> </a>
</h3>
<p>Now that we have all of the parts of our time series, we can actually reconstruct the original time series using each of its parts given our equation: <code>time series = trend * seasonality * random noise</code>. While we are at it, we will go back and get the portion of our data that we omitted.</p>
<div class="highlight"><pre><span></span><span class="p">),</span> <span class="n">time_series</span> <span class="k">AS</span> <span class="p">(</span>
  <span class="k">SELECT</span>
    <span class="n">s</span><span class="p">.</span><span class="n">mnth</span>
    <span class="p">,</span><span class="n">s</span><span class="p">.</span><span class="n">Passengers</span>
    <span class="p">,</span><span class="n">s</span><span class="p">.</span><span class="n">trend</span>
    <span class="p">,</span><span class="n">s</span><span class="p">.</span><span class="n">detrend</span>
    <span class="p">,</span><span class="n">s</span><span class="p">.</span><span class="n">avg_seasonality</span>
    <span class="p">,</span><span class="n">s</span><span class="p">.</span><span class="n">Passengers</span> <span class="o">/</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">avg_seasonality</span> <span class="o">*</span> <span class="n">s</span><span class="p">.</span><span class="n">trend</span><span class="p">)</span> <span class="k">AS</span> <span class="n">random_noise</span>
  <span class="k">FROM</span> <span class="n">seasonality</span> <span class="n">s</span>
<span class="p">)</span>
<span class="k">SELECT</span>
  <span class="n">a</span><span class="p">.</span><span class="n">mnth</span> <span class="k">AS</span> <span class="k">Month</span>
  <span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">Passengers</span> 
  <span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">trend</span>
  <span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">detrend</span>
  <span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">avg_seasonality</span>
  <span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">random_noise</span>
  <span class="p">,</span><span class="k">CAST</span><span class="p">(</span><span class="n">ROUND</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">trend</span> <span class="o">*</span> <span class="n">t</span><span class="p">.</span><span class="n">avg_seasonality</span> <span class="o">*</span> <span class="n">t</span><span class="p">.</span><span class="n">random_noise</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="k">AS</span> <span class="n">INT64</span><span class="p">)</span> <span class="k">AS</span> <span class="n">reconstructed</span>
<span class="k">FROM</span> <span class="o">`</span><span class="n">timeseries</span><span class="p">.</span><span class="n">airpassengers</span><span class="o">`</span> <span class="n">a</span>
<span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">time_series</span> <span class="n">t</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">mnth</span><span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">mnth</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Month</th>
      <th>Passengers</th>
      <th>trend</th>
      <th>detrend</th>
      <th>avg_seasonality</th>
      <th>random_noise</th>
      <th>reconstructed</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1949-01-01</td>
      <td>112</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1949-02-01</td>
      <td>118</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1949-03-01</td>
      <td>132</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1949-04-01</td>
      <td>129</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1949-05-01</td>
      <td>121</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1949-06-01</td>
      <td>135</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1949-07-01</td>
      <td>148</td>
      <td>126.666667</td>
      <td>1.168421</td>
      <td>1.230005</td>
      <td>0.949932</td>
      <td>148</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1949-08-01</td>
      <td>148</td>
      <td>126.916667</td>
      <td>1.166120</td>
      <td>1.222717</td>
      <td>0.953712</td>
      <td>148</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1949-09-01</td>
      <td>136</td>
      <td>127.583333</td>
      <td>1.065970</td>
      <td>1.063440</td>
      <td>1.002379</td>
      <td>136</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1949-10-01</td>
      <td>119</td>
      <td>128.333333</td>
      <td>0.927273</td>
      <td>0.924510</td>
      <td>1.002988</td>
      <td>119</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1949-11-01</td>
      <td>104</td>
      <td>128.833333</td>
      <td>0.807245</td>
      <td>0.803798</td>
      <td>1.004287</td>
      <td>104</td>
    </tr>
    <tr>
      <th>11</th>
      <td>1949-12-01</td>
      <td>118</td>
      <td>129.166667</td>
      <td>0.913548</td>
      <td>0.902477</td>
      <td>1.012268</td>
      <td>118</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-11ad407df6e942fd846532eb075b871e"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-11ad407df6e942fd846532eb075b871e") {
      outputDiv = document.getElementById("altair-viz-11ad407df6e942fd846532eb075b871e");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "hconcat": [{"mark": "line", "encoding": {"x": {"type": "temporal", "field": "Month"}, "y": {"type": "quantitative", "field": "Passengers"}}, "title": "Original"}, {"mark": {"type": "line", "color": "red"}, "encoding": {"x": {"type": "temporal", "field": "Month"}, "y": {"type": "quantitative", "field": "reconstructed"}}, "title": "Reconstructed"}], "data": {"name": "data-ed5047944c212044212fa68385ad6894"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-ed5047944c212044212fa68385ad6894": [{"Month": "1949-01-01T00:00:00", "Passengers": 112, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-02-01T00:00:00", "Passengers": 118, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-03-01T00:00:00", "Passengers": 132, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-04-01T00:00:00", "Passengers": 129, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-05-01T00:00:00", "Passengers": 121, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-06-01T00:00:00", "Passengers": 135, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1949-07-01T00:00:00", "Passengers": 148, "trend": 126.666666667, "detrend": 1.1684210529999999, "avg_seasonality": 1.230005305, "random_noise": 0.949931718, "reconstructed": 148}, {"Month": "1949-08-01T00:00:00", "Passengers": 148, "trend": 126.916666667, "detrend": 1.1661195009999998, "avg_seasonality": 1.222716522, "random_noise": 0.953712067, "reconstructed": 148}, {"Month": "1949-09-01T00:00:00", "Passengers": 136, "trend": 127.583333333, "detrend": 1.065969954, "avg_seasonality": 1.063440298, "random_noise": 1.002378748, "reconstructed": 136}, {"Month": "1949-10-01T00:00:00", "Passengers": 119, "trend": 128.33333333299998, "detrend": 0.9272727270000001, "avg_seasonality": 0.92450994, "random_noise": 1.00298838, "reconstructed": 119}, {"Month": "1949-11-01T00:00:00", "Passengers": 104, "trend": 128.83333333299998, "detrend": 0.807244502, "avg_seasonality": 0.803798323, "random_noise": 1.004287368, "reconstructed": 104}, {"Month": "1949-12-01T00:00:00", "Passengers": 118, "trend": 129.16666666700002, "detrend": 0.9135483870000001, "avg_seasonality": 0.902477105, "random_noise": 1.01226766, "reconstructed": 118}, {"Month": "1950-01-01T00:00:00", "Passengers": 115, "trend": 130.33333333299998, "detrend": 0.882352941, "avg_seasonality": 0.914742573, "random_noise": 0.964591533, "reconstructed": 115}, {"Month": "1950-02-01T00:00:00", "Passengers": 126, "trend": 132.16666666700002, "detrend": 0.95334174, "avg_seasonality": 0.887863451, "random_noise": 1.073748153, "reconstructed": 126}, {"Month": "1950-03-01T00:00:00", "Passengers": 141, "trend": 134.0, "detrend": 1.0522388059999999, "avg_seasonality": 1.0109427579999999, "random_noise": 1.040849047, "reconstructed": 141}, {"Month": "1950-04-01T00:00:00", "Passengers": 135, "trend": 135.83333333299998, "detrend": 0.9938650309999999, "avg_seasonality": 0.9787809540000001, "random_noise": 1.015411085, "reconstructed": 135}, {"Month": "1950-05-01T00:00:00", "Passengers": 125, "trend": 137.0, "detrend": 0.9124087590000001, "avg_seasonality": 0.983574383, "random_noise": 0.9276459159999999, "reconstructed": 125}, {"Month": "1950-06-01T00:00:00", "Passengers": 149, "trend": 137.83333333299998, "detrend": 1.081015719, "avg_seasonality": 1.115711184, "random_noise": 0.968902826, "reconstructed": 149}, {"Month": "1950-07-01T00:00:00", "Passengers": 170, "trend": 139.66666666700002, "detrend": 1.217183771, "avg_seasonality": 1.230005305, "random_noise": 0.989576033, "reconstructed": 170}, {"Month": "1950-08-01T00:00:00", "Passengers": 170, "trend": 142.16666666700002, "detrend": 1.195779601, "avg_seasonality": 1.222716522, "random_noise": 0.9779696109999999, "reconstructed": 170}, {"Month": "1950-09-01T00:00:00", "Passengers": 158, "trend": 144.16666666700002, "detrend": 1.095953757, "avg_seasonality": 1.063440298, "random_noise": 1.030573845, "reconstructed": 158}, {"Month": "1950-10-01T00:00:00", "Passengers": 133, "trend": 147.25, "detrend": 0.9032258059999999, "avg_seasonality": 0.92450994, "random_noise": 0.976977929, "reconstructed": 133}, {"Month": "1950-11-01T00:00:00", "Passengers": 114, "trend": 149.58333333299998, "detrend": 0.762116992, "avg_seasonality": 0.803798323, "random_noise": 0.9481445409999999, "reconstructed": 114}, {"Month": "1950-12-01T00:00:00", "Passengers": 140, "trend": 153.5, "detrend": 0.912052117, "avg_seasonality": 0.902477105, "random_noise": 1.010609701, "reconstructed": 140}, {"Month": "1951-01-01T00:00:00", "Passengers": 145, "trend": 155.91666666700002, "detrend": 0.929983966, "avg_seasonality": 0.914742573, "random_noise": 1.0166619479999999, "reconstructed": 145}, {"Month": "1951-02-01T00:00:00", "Passengers": 150, "trend": 158.33333333299998, "detrend": 0.947368421, "avg_seasonality": 0.887863451, "random_noise": 1.067020407, "reconstructed": 150}, {"Month": "1951-03-01T00:00:00", "Passengers": 178, "trend": 160.75, "detrend": 1.107309487, "avg_seasonality": 1.0109427579999999, "random_noise": 1.095323625, "reconstructed": 178}, {"Month": "1951-04-01T00:00:00", "Passengers": 163, "trend": 162.91666666700002, "detrend": 1.000511509, "avg_seasonality": 0.9787809540000001, "random_noise": 1.022201653, "reconstructed": 163}, {"Month": "1951-05-01T00:00:00", "Passengers": 172, "trend": 165.33333333299998, "detrend": 1.0403225809999999, "avg_seasonality": 0.983574383, "random_noise": 1.057695888, "reconstructed": 172}, {"Month": "1951-06-01T00:00:00", "Passengers": 178, "trend": 168.0, "detrend": 1.05952381, "avg_seasonality": 1.115711184, "random_noise": 0.949639857, "reconstructed": 178}, {"Month": "1951-07-01T00:00:00", "Passengers": 199, "trend": 170.16666666700002, "detrend": 1.1694417240000001, "avg_seasonality": 1.230005305, "random_noise": 0.950761528, "reconstructed": 199}, {"Month": "1951-08-01T00:00:00", "Passengers": 199, "trend": 172.33333333299998, "detrend": 1.154738878, "avg_seasonality": 1.222716522, "random_noise": 0.944404412, "reconstructed": 199}, {"Month": "1951-09-01T00:00:00", "Passengers": 184, "trend": 174.83333333299998, "detrend": 1.052430887, "avg_seasonality": 1.063440298, "random_noise": 0.989647363, "reconstructed": 184}, {"Month": "1951-10-01T00:00:00", "Passengers": 162, "trend": 176.08333333299998, "detrend": 0.92001893, "avg_seasonality": 0.92450994, "random_noise": 0.9951422809999999, "reconstructed": 162}, {"Month": "1951-11-01T00:00:00", "Passengers": 146, "trend": 177.58333333299998, "detrend": 0.822149226, "avg_seasonality": 0.803798323, "random_noise": 1.0228302329999999, "reconstructed": 146}, {"Month": "1951-12-01T00:00:00", "Passengers": 166, "trend": 178.5, "detrend": 0.9299719890000001, "avg_seasonality": 0.902477105, "random_noise": 1.030466018, "reconstructed": 166}, {"Month": "1952-01-01T00:00:00", "Passengers": 171, "trend": 181.83333333299998, "detrend": 0.9404216320000001, "avg_seasonality": 0.914742573, "random_noise": 1.028072443, "reconstructed": 171}, {"Month": "1952-02-01T00:00:00", "Passengers": 180, "trend": 184.41666666700002, "detrend": 0.97605061, "avg_seasonality": 0.887863451, "random_noise": 1.0993251370000001, "reconstructed": 180}, {"Month": "1952-03-01T00:00:00", "Passengers": 193, "trend": 188.0, "detrend": 1.026595745, "avg_seasonality": 1.0109427579999999, "random_noise": 1.015483554, "reconstructed": 193}, {"Month": "1952-04-01T00:00:00", "Passengers": 181, "trend": 190.08333333299998, "detrend": 0.9522139409999999, "avg_seasonality": 0.9787809540000001, "random_noise": 0.97285704, "reconstructed": 181}, {"Month": "1952-05-01T00:00:00", "Passengers": 183, "trend": 192.5, "detrend": 0.9506493509999999, "avg_seasonality": 0.983574383, "random_noise": 0.9665251220000001, "reconstructed": 183}, {"Month": "1952-06-01T00:00:00", "Passengers": 218, "trend": 194.66666666700002, "detrend": 1.119863014, "avg_seasonality": 1.115711184, "random_noise": 1.003721241, "reconstructed": 218}, {"Month": "1952-07-01T00:00:00", "Passengers": 230, "trend": 197.0, "detrend": 1.16751269, "avg_seasonality": 1.230005305, "random_noise": 0.949193215, "reconstructed": 230}, {"Month": "1952-08-01T00:00:00", "Passengers": 242, "trend": 199.08333333299998, "detrend": 1.215571369, "avg_seasonality": 1.222716522, "random_noise": 0.9941563290000001, "reconstructed": 242}, {"Month": "1952-09-01T00:00:00", "Passengers": 209, "trend": 200.41666666700002, "detrend": 1.042827443, "avg_seasonality": 1.063440298, "random_noise": 0.98061682, "reconstructed": 209}, {"Month": "1952-10-01T00:00:00", "Passengers": 191, "trend": 204.0, "detrend": 0.93627451, "avg_seasonality": 0.92450994, "random_noise": 1.0127251959999999, "reconstructed": 191}, {"Month": "1952-11-01T00:00:00", "Passengers": 172, "trend": 208.5, "detrend": 0.824940048, "avg_seasonality": 0.803798323, "random_noise": 1.026302276, "reconstructed": 172}, {"Month": "1952-12-01T00:00:00", "Passengers": 194, "trend": 212.33333333299998, "detrend": 0.9136577709999999, "avg_seasonality": 0.902477105, "random_noise": 1.012388864, "reconstructed": 194}, {"Month": "1953-01-01T00:00:00", "Passengers": 196, "trend": 214.41666666700002, "detrend": 0.914108045, "avg_seasonality": 0.914742573, "random_noise": 0.9993063320000001, "reconstructed": 196}, {"Month": "1953-02-01T00:00:00", "Passengers": 196, "trend": 217.25, "detrend": 0.9021864209999999, "avg_seasonality": 0.887863451, "random_noise": 1.016131952, "reconstructed": 196}, {"Month": "1953-03-01T00:00:00", "Passengers": 236, "trend": 219.75, "detrend": 1.073947668, "avg_seasonality": 1.0109427579999999, "random_noise": 1.062322925, "reconstructed": 236}, {"Month": "1953-04-01T00:00:00", "Passengers": 235, "trend": 222.08333333299998, "detrend": 1.0581613509999999, "avg_seasonality": 0.9787809540000001, "random_noise": 1.081101289, "reconstructed": 235}, {"Month": "1953-05-01T00:00:00", "Passengers": 229, "trend": 223.75, "detrend": 1.023463687, "avg_seasonality": 0.983574383, "random_noise": 1.040555452, "reconstructed": 229}, {"Month": "1953-06-01T00:00:00", "Passengers": 243, "trend": 224.41666666700002, "detrend": 1.082807278, "avg_seasonality": 1.115711184, "random_noise": 0.9705085809999999, "reconstructed": 243}, {"Month": "1953-07-01T00:00:00", "Passengers": 264, "trend": 225.0, "detrend": 1.173333333, "avg_seasonality": 1.230005305, "random_noise": 0.953925425, "reconstructed": 264}, {"Month": "1953-08-01T00:00:00", "Passengers": 272, "trend": 225.66666666700002, "detrend": 1.205317578, "avg_seasonality": 1.222716522, "random_noise": 0.985770255, "reconstructed": 272}, {"Month": "1953-09-01T00:00:00", "Passengers": 237, "trend": 225.0, "detrend": 1.0533333329999999, "avg_seasonality": 1.063440298, "random_noise": 0.9904959740000001, "reconstructed": 237}, {"Month": "1953-10-01T00:00:00", "Passengers": 211, "trend": 224.91666666700002, "detrend": 0.938125232, "avg_seasonality": 0.92450994, "random_noise": 1.014727036, "reconstructed": 211}, {"Month": "1953-11-01T00:00:00", "Passengers": 180, "trend": 224.25, "detrend": 0.802675585, "avg_seasonality": 0.803798323, "random_noise": 0.99860321, "reconstructed": 180}, {"Month": "1953-12-01T00:00:00", "Passengers": 201, "trend": 224.66666666700002, "detrend": 0.8946587540000001, "avg_seasonality": 0.902477105, "random_noise": 0.991336787, "reconstructed": 201}, {"Month": "1954-01-01T00:00:00", "Passengers": 204, "trend": 226.41666666700002, "detrend": 0.900993743, "avg_seasonality": 0.914742573, "random_noise": 0.9849697279999999, "reconstructed": 204}, {"Month": "1954-02-01T00:00:00", "Passengers": 188, "trend": 229.58333333299998, "detrend": 0.818874773, "avg_seasonality": 0.887863451, "random_noise": 0.922298099, "reconstructed": 188}, {"Month": "1954-03-01T00:00:00", "Passengers": 235, "trend": 231.33333333299998, "detrend": 1.015850144, "avg_seasonality": 1.0109427579999999, "random_noise": 1.004854267, "reconstructed": 235}, {"Month": "1954-04-01T00:00:00", "Passengers": 227, "trend": 233.16666666700002, "detrend": 0.973552538, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9946582359999999, "reconstructed": 227}, {"Month": "1954-05-01T00:00:00", "Passengers": 234, "trend": 234.66666666700002, "detrend": 0.9971590909999999, "avg_seasonality": 0.983574383, "random_noise": 1.013811571, "reconstructed": 234}, {"Month": "1954-06-01T00:00:00", "Passengers": 264, "trend": 236.58333333299998, "detrend": 1.115885875, "avg_seasonality": 1.115711184, "random_noise": 1.000156574, "reconstructed": 264}, {"Month": "1954-07-01T00:00:00", "Passengers": 302, "trend": 238.91666666700002, "detrend": 1.264039065, "avg_seasonality": 1.230005305, "random_noise": 1.027669604, "reconstructed": 302}, {"Month": "1954-08-01T00:00:00", "Passengers": 293, "trend": 242.08333333299998, "detrend": 1.210327022, "avg_seasonality": 1.222716522, "random_noise": 0.989867235, "reconstructed": 293}, {"Month": "1954-09-01T00:00:00", "Passengers": 259, "trend": 245.83333333299998, "detrend": 1.0535593220000001, "avg_seasonality": 1.063440298, "random_noise": 0.990708481, "reconstructed": 259}, {"Month": "1954-10-01T00:00:00", "Passengers": 229, "trend": 248.5, "detrend": 0.921529175, "avg_seasonality": 0.92450994, "random_noise": 0.996775843, "reconstructed": 229}, {"Month": "1954-11-01T00:00:00", "Passengers": 203, "trend": 252.0, "detrend": 0.805555556, "avg_seasonality": 0.803798323, "random_noise": 1.002186161, "reconstructed": 203}, {"Month": "1954-12-01T00:00:00", "Passengers": 229, "trend": 255.0, "detrend": 0.8980392159999999, "avg_seasonality": 0.902477105, "random_noise": 0.9950825459999999, "reconstructed": 229}, {"Month": "1955-01-01T00:00:00", "Passengers": 242, "trend": 259.25, "detrend": 0.933461909, "avg_seasonality": 0.914742573, "random_noise": 1.020464048, "reconstructed": 242}, {"Month": "1955-02-01T00:00:00", "Passengers": 233, "trend": 264.416666667, "detrend": 0.8811849979999999, "avg_seasonality": 0.887863451, "random_noise": 0.992478063, "reconstructed": 233}, {"Month": "1955-03-01T00:00:00", "Passengers": 267, "trend": 268.916666667, "detrend": 0.9928726370000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9821254759999999, "reconstructed": 267}, {"Month": "1955-04-01T00:00:00", "Passengers": 269, "trend": 273.333333333, "detrend": 0.984146341, "avg_seasonality": 0.9787809540000001, "random_noise": 1.0054817040000001, "reconstructed": 269}, {"Month": "1955-05-01T00:00:00", "Passengers": 270, "trend": 277.083333333, "detrend": 0.97443609, "avg_seasonality": 0.983574383, "random_noise": 0.990709098, "reconstructed": 270}, {"Month": "1955-06-01T00:00:00", "Passengers": 315, "trend": 279.916666667, "detrend": 1.1253349209999999, "avg_seasonality": 1.115711184, "random_noise": 1.008625653, "reconstructed": 315}, {"Month": "1955-07-01T00:00:00", "Passengers": 364, "trend": 284.0, "detrend": 1.281690141, "avg_seasonality": 1.230005305, "random_noise": 1.042020011, "reconstructed": 364}, {"Month": "1955-08-01T00:00:00", "Passengers": 347, "trend": 287.5, "detrend": 1.206956522, "avg_seasonality": 1.222716522, "random_noise": 0.987110667, "reconstructed": 347}, {"Month": "1955-09-01T00:00:00", "Passengers": 312, "trend": 291.166666667, "detrend": 1.071551231, "avg_seasonality": 1.063440298, "random_noise": 1.007627069, "reconstructed": 312}, {"Month": "1955-10-01T00:00:00", "Passengers": 274, "trend": 295.333333333, "detrend": 0.927765237, "avg_seasonality": 0.92450994, "random_noise": 1.003521105, "reconstructed": 274}, {"Month": "1955-11-01T00:00:00", "Passengers": 237, "trend": 299.0, "detrend": 0.79264214, "avg_seasonality": 0.803798323, "random_noise": 0.98612067, "reconstructed": 237}, {"Month": "1955-12-01T00:00:00", "Passengers": 278, "trend": 303.0, "detrend": 0.9174917490000001, "avg_seasonality": 0.902477105, "random_noise": 1.016637147, "reconstructed": 278}, {"Month": "1956-01-01T00:00:00", "Passengers": 284, "trend": 307.916666667, "detrend": 0.92232747, "avg_seasonality": 0.914742573, "random_noise": 1.008291837, "reconstructed": 284}, {"Month": "1956-02-01T00:00:00", "Passengers": 277, "trend": 312.0, "detrend": 0.887820513, "avg_seasonality": 0.887863451, "random_noise": 0.9999516390000001, "reconstructed": 277}, {"Month": "1956-03-01T00:00:00", "Passengers": 317, "trend": 316.833333333, "detrend": 1.0005260390000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.989696035, "reconstructed": 317}, {"Month": "1956-04-01T00:00:00", "Passengers": 313, "trend": 320.416666667, "detrend": 0.9768530559999999, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9980303070000001, "reconstructed": 313}, {"Month": "1956-05-01T00:00:00", "Passengers": 318, "trend": 323.083333333, "detrend": 0.984266185, "avg_seasonality": 0.983574383, "random_noise": 1.000703355, "reconstructed": 318}, {"Month": "1956-06-01T00:00:00", "Passengers": 374, "trend": 325.916666667, "detrend": 1.1475326000000001, "avg_seasonality": 1.115711184, "random_noise": 1.028521195, "reconstructed": 374}, {"Month": "1956-07-01T00:00:00", "Passengers": 413, "trend": 328.25, "detrend": 1.258187357, "avg_seasonality": 1.230005305, "random_noise": 1.022912139, "reconstructed": 413}, {"Month": "1956-08-01T00:00:00", "Passengers": 405, "trend": 330.833333333, "detrend": 1.22418136, "avg_seasonality": 1.222716522, "random_noise": 1.001198019, "reconstructed": 405}, {"Month": "1956-09-01T00:00:00", "Passengers": 355, "trend": 332.833333333, "detrend": 1.0665999, "avg_seasonality": 1.063440298, "random_noise": 1.0029711140000002, "reconstructed": 355}, {"Month": "1956-10-01T00:00:00", "Passengers": 306, "trend": 336.083333333, "detrend": 0.91048847, "avg_seasonality": 0.92450994, "random_noise": 0.9848336190000001, "reconstructed": 306}, {"Month": "1956-11-01T00:00:00", "Passengers": 271, "trend": 339.0, "detrend": 0.799410029, "avg_seasonality": 0.803798323, "random_noise": 0.9945405540000001, "reconstructed": 271}, {"Month": "1956-12-01T00:00:00", "Passengers": 306, "trend": 342.083333333, "detrend": 0.894518879, "avg_seasonality": 0.902477105, "random_noise": 0.991181798, "reconstructed": 306}, {"Month": "1957-01-01T00:00:00", "Passengers": 315, "trend": 346.08333333300004, "detrend": 0.9101854079999999, "avg_seasonality": 0.914742573, "random_noise": 0.99501809, "reconstructed": 315}, {"Month": "1957-02-01T00:00:00", "Passengers": 301, "trend": 350.41666666699996, "detrend": 0.858977408, "avg_seasonality": 0.887863451, "random_noise": 0.9674656690000001, "reconstructed": 301}, {"Month": "1957-03-01T00:00:00", "Passengers": 356, "trend": 355.58333333300004, "detrend": 1.001171783, "avg_seasonality": 1.0109427579999999, "random_noise": 0.99033479, "reconstructed": 356}, {"Month": "1957-04-01T00:00:00", "Passengers": 348, "trend": 359.66666666699996, "detrend": 0.967562558, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9885384, "reconstructed": 348}, {"Month": "1957-05-01T00:00:00", "Passengers": 355, "trend": 363.08333333300004, "detrend": 0.977736975, "avg_seasonality": 0.983574383, "random_noise": 0.9940651079999999, "reconstructed": 355}, {"Month": "1957-06-01T00:00:00", "Passengers": 422, "trend": 365.91666666699996, "detrend": 1.153268048, "avg_seasonality": 1.115711184, "random_noise": 1.033661816, "reconstructed": 422}, {"Month": "1957-07-01T00:00:00", "Passengers": 465, "trend": 368.41666666699996, "detrend": 1.262157883, "avg_seasonality": 1.230005305, "random_noise": 1.0261401940000001, "reconstructed": 465}, {"Month": "1957-08-01T00:00:00", "Passengers": 467, "trend": 370.5, "detrend": 1.260458839, "avg_seasonality": 1.222716522, "random_noise": 1.030867594, "reconstructed": 467}, {"Month": "1957-09-01T00:00:00", "Passengers": 404, "trend": 371.91666666699996, "detrend": 1.086264844, "avg_seasonality": 1.063440298, "random_noise": 1.021462932, "reconstructed": 404}, {"Month": "1957-10-01T00:00:00", "Passengers": 347, "trend": 372.41666666699996, "detrend": 0.93175207, "avg_seasonality": 0.92450994, "random_noise": 1.00783348, "reconstructed": 347}, {"Month": "1957-11-01T00:00:00", "Passengers": 305, "trend": 372.41666666699996, "detrend": 0.818975162, "avg_seasonality": 0.803798323, "random_noise": 1.018881402, "reconstructed": 305}, {"Month": "1957-12-01T00:00:00", "Passengers": 336, "trend": 373.08333333300004, "detrend": 0.900603082, "avg_seasonality": 0.902477105, "random_noise": 0.997923468, "reconstructed": 336}, {"Month": "1958-01-01T00:00:00", "Passengers": 340, "trend": 374.16666666699996, "detrend": 0.9086859690000001, "avg_seasonality": 0.914742573, "random_noise": 0.993378898, "reconstructed": 340}, {"Month": "1958-02-01T00:00:00", "Passengers": 318, "trend": 376.33333333300004, "detrend": 0.8449955709999999, "avg_seasonality": 0.887863451, "random_noise": 0.951717936, "reconstructed": 318}, {"Month": "1958-03-01T00:00:00", "Passengers": 362, "trend": 379.5, "detrend": 0.953886693, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9435615279999999, "reconstructed": 362}, {"Month": "1958-04-01T00:00:00", "Passengers": 348, "trend": 379.5, "detrend": 0.916996047, "avg_seasonality": 0.9787809540000001, "random_noise": 0.936875655, "reconstructed": 348}, {"Month": "1958-05-01T00:00:00", "Passengers": 363, "trend": 380.5, "detrend": 0.954007884, "avg_seasonality": 0.983574383, "random_noise": 0.969939743, "reconstructed": 363}, {"Month": "1958-06-01T00:00:00", "Passengers": 435, "trend": 380.91666666699996, "detrend": 1.141982061, "avg_seasonality": 1.115711184, "random_noise": 1.0235463059999999, "reconstructed": 435}, {"Month": "1958-07-01T00:00:00", "Passengers": 491, "trend": 381.0, "detrend": 1.2887139109999999, "avg_seasonality": 1.230005305, "random_noise": 1.047730368, "reconstructed": 491}, {"Month": "1958-08-01T00:00:00", "Passengers": 505, "trend": 382.66666666699996, "detrend": 1.319686411, "avg_seasonality": 1.222716522, "random_noise": 1.0793069259999999, "reconstructed": 505}, {"Month": "1958-09-01T00:00:00", "Passengers": 404, "trend": 384.66666666699996, "detrend": 1.050259965, "avg_seasonality": 1.063440298, "random_noise": 0.98760595, "reconstructed": 404}, {"Month": "1958-10-01T00:00:00", "Passengers": 359, "trend": 388.33333333300004, "detrend": 0.924463519, "avg_seasonality": 0.92450994, "random_noise": 0.9999497890000001, "reconstructed": 359}, {"Month": "1958-11-01T00:00:00", "Passengers": 310, "trend": 392.33333333300004, "detrend": 0.790144435, "avg_seasonality": 0.803798323, "random_noise": 0.9830132909999999, "reconstructed": 310}, {"Month": "1958-12-01T00:00:00", "Passengers": 337, "trend": 397.08333333300004, "detrend": 0.848688353, "avg_seasonality": 0.902477105, "random_noise": 0.940398762, "reconstructed": 337}, {"Month": "1959-01-01T00:00:00", "Passengers": 360, "trend": 400.16666666699996, "detrend": 0.8996251559999999, "avg_seasonality": 0.914742573, "random_noise": 0.983473583, "reconstructed": 360}, {"Month": "1959-02-01T00:00:00", "Passengers": 342, "trend": 404.91666666699996, "detrend": 0.844618234, "avg_seasonality": 0.887863451, "random_noise": 0.951292942, "reconstructed": 342}, {"Month": "1959-03-01T00:00:00", "Passengers": 406, "trend": 409.41666666699996, "detrend": 0.9916547929999999, "avg_seasonality": 1.0109427579999999, "random_noise": 0.9809208140000001, "reconstructed": 406}, {"Month": "1959-04-01T00:00:00", "Passengers": 396, "trend": 414.33333333300004, "detrend": 0.955752212, "avg_seasonality": 0.9787809540000001, "random_noise": 0.9764720170000001, "reconstructed": 396}, {"Month": "1959-05-01T00:00:00", "Passengers": 420, "trend": 418.33333333300004, "detrend": 1.003984064, "avg_seasonality": 0.983574383, "random_noise": 1.0207505209999999, "reconstructed": 420}, {"Month": "1959-06-01T00:00:00", "Passengers": 472, "trend": 422.66666666699996, "detrend": 1.116719243, "avg_seasonality": 1.115711184, "random_noise": 1.000903512, "reconstructed": 472}, {"Month": "1959-07-01T00:00:00", "Passengers": 548, "trend": 428.33333333300004, "detrend": 1.279377432, "avg_seasonality": 1.230005305, "random_noise": 1.040139767, "reconstructed": 548}, {"Month": "1959-08-01T00:00:00", "Passengers": 559, "trend": 433.08333333300004, "detrend": 1.29074466, "avg_seasonality": 1.222716522, "random_noise": 1.055636885, "reconstructed": 559}, {"Month": "1959-09-01T00:00:00", "Passengers": 463, "trend": 437.16666666699996, "detrend": 1.059092642, "avg_seasonality": 1.063440298, "random_noise": 0.995911707, "reconstructed": 463}, {"Month": "1959-10-01T00:00:00", "Passengers": 407, "trend": 438.25, "detrend": 0.928693668, "avg_seasonality": 0.92450994, "random_noise": 1.004525347, "reconstructed": 407}, {"Month": "1959-11-01T00:00:00", "Passengers": 362, "trend": 443.66666666699996, "detrend": 0.8159278740000001, "avg_seasonality": 0.803798323, "random_noise": 1.015090291, "reconstructed": 362}, {"Month": "1959-12-01T00:00:00", "Passengers": 405, "trend": 448.0, "detrend": 0.904017857, "avg_seasonality": 0.902477105, "random_noise": 1.001707248, "reconstructed": 405}, {"Month": "1960-01-01T00:00:00", "Passengers": 417, "trend": 453.25, "detrend": 0.920022063, "avg_seasonality": 0.914742573, "random_noise": 1.005771558, "reconstructed": 417}, {"Month": "1960-02-01T00:00:00", "Passengers": 391, "trend": 459.41666666699996, "detrend": 0.851079267, "avg_seasonality": 0.887863451, "random_noise": 0.9585699990000001, "reconstructed": 391}, {"Month": "1960-03-01T00:00:00", "Passengers": 419, "trend": 463.33333333300004, "detrend": 0.9043165470000001, "avg_seasonality": 1.0109427579999999, "random_noise": 0.894527944, "reconstructed": 419}, {"Month": "1960-04-01T00:00:00", "Passengers": 461, "trend": 467.08333333300004, "detrend": 0.9869759140000001, "avg_seasonality": 0.9787809540000001, "random_noise": 1.008372619, "reconstructed": 461}, {"Month": "1960-05-01T00:00:00", "Passengers": 472, "trend": 471.58333333300004, "detrend": 1.000883548, "avg_seasonality": 0.983574383, "random_noise": 1.0175982270000001, "reconstructed": 472}, {"Month": "1960-06-01T00:00:00", "Passengers": 535, "trend": 473.91666666699996, "detrend": 1.128890452, "avg_seasonality": 1.115711184, "random_noise": 1.0118124370000001, "reconstructed": 535}, {"Month": "1960-07-01T00:00:00", "Passengers": 622, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-08-01T00:00:00", "Passengers": 606, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-09-01T00:00:00", "Passengers": 508, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-10-01T00:00:00", "Passengers": 461, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-11-01T00:00:00", "Passengers": 390, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}, {"Month": "1960-12-01T00:00:00", "Passengers": 432, "trend": null, "detrend": null, "avg_seasonality": null, "random_noise": null, "reconstructed": null}]}}, {"mode": "vega-lite"});
</script>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As you can see, we were able to recreate the original time series values.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Python">
<a class="anchor" href="#Python" aria-hidden="true"><span class="octicon octicon-link"></span></a>Python<a class="anchor-link" href="#Python"> </a>
</h1>
<p>As promised, I will show the same steps in Python.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">air</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'data/AirPassengers.csv'</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">'Month'</span><span class="p">])</span>
<span class="n">air</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Month</th>
      <th>Passengers</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1949-01-01</td>
      <td>112</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1949-02-01</td>
      <td>118</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1949-03-01</td>
      <td>132</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1949-04-01</td>
      <td>129</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1949-05-01</td>
      <td>121</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="tadtenacious/tenacious-blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/tenacious-blog/sql/gcp/bigquery/python/time%20series/2020/05/21/BQ-TS.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/tenacious-blog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/tenacious-blog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/tenacious-blog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>My Adventures in Data</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/tadtenacious" title="tadtenacious"><svg class="svg-icon grey"><use xlink:href="/tenacious-blog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/TadTenacious" title="TadTenacious"><svg class="svg-icon grey"><use xlink:href="/tenacious-blog/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
